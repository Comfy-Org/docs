---
title: 故障排除
sidebarTitle: 故障排除
description: 解决常见的 ComfyUI-Manager 问题
---

## 常见问题

### 自定义 git 可执行文件路径

如果您的 `git.exe` 安装在系统默认位置以外的特定位置：

1. 安装 ComfyUI-Manager 并运行一次 ComfyUI
2. 打开 `<USER_DIRECTORY>/default/ComfyUI-Manager/config.ini`
3. 在 `git_exe =` 中指定包含文件名的完整路径

```ini
git_exe = C:\Program Files\Git\bin\git.exe
```

### ComfyUI-Manager 更新失败

如果更新 ComfyUI-Manager 本身失败，请进入 ComfyUI-Manager 目录并运行：

```bash
git update-ref refs/remotes/origin/main a361cc1 && git fetch --all && git pull
```

### Windows：Overlapped Object 错误

如果遇到 `Overlapped Object has pending operation at deallocation on ComfyUI Manager load`：

编辑 `config.ini` 并添加：

```ini
windows_selector_event_loop_policy = True
```

### SSL 证书验证失败

如果遇到 `SSL: CERTIFICATE_VERIFY_FAILED` 错误：

编辑 `config.ini` 并添加：

```ini
bypass_ssl = True
```

## 安装问题

### 安装路径不正确

ComfyUI-Manager 文件必须位于 `ComfyUI/custom_nodes/comfyui-manager`。

**需要避免的常见错误：**

| 问题 | 说明 |
|------|------|
| 文件位置错误 | Manager 文件如 `__init__.py` 直接放在 `custom_nodes` 目录中 |
| 双重嵌套文件夹 | 安装为 `custom_nodes/ComfyUI-Manager/ComfyUI-Manager` |
| 文件夹名称错误 | 安装为 `custom_nodes/ComfyUI-Manager-main` |
| 压缩格式 | 从压缩文件安装但未正确解压 |

<Warning>
如果安装不正确，ComfyUI-Manager 可能看起来可以工作，但不会被识别为可更新，并可能导致重复安装。请删除它并通过 `git clone` 正确重新安装。
</Warning>

## 网络问题

### GitHub 访问问题

如果您对 GitHub 的访问受限，请设置 `GITHUB_ENDPOINT` 环境变量：

```bash
GITHUB_ENDPOINT=https://mirror.ghproxy.com/https://github.com
```

### Hugging Face 访问问题

如果您对 Hugging Face 的访问受限，请设置 `HF_ENDPOINT` 环境变量：

```bash
HF_ENDPOINT=https://some-hf-mirror.com
```

## 扫描器故障排除

运行 `scan.sh` 脚本时：

- 它通过拉取或克隆 `custom-node-list.json` 中列出的自定义节点到 `~/.tmp/default` 来更新 `extension-node-map.json`
- 它使用 GitHub API 更新 `github-stats.json`

| 选项 | 描述 |
|------|------|
| `--skip-update` | 跳过更新 extension-node-map.json |
| `--skip-stat-update` | 跳过更新 github-stats.json |
| `--skip-all` | 跳过两个更新步骤 |

<Tip>
为避免 GitHub API 速率限制，请设置您的令牌：`export GITHUB_TOKEN=your_token_here`
</Tip>

如果您想指定 `~/.tmp/default` 以外的不同路径，请直接运行 `python scanner.py [path]` 而不是 `scan.sh`。

## 安全策略

如果您在通过 git URL 安装自定义节点或使用 nightly 版本时遇到错误 `This action is not allowed with this security level configuration`，您需要在 `config.ini` 文件中调整安全级别。

`config.ini` 文件位于：
- **ComfyUI v0.3.76+**：`<USER_DIRECTORY>/__manager/config.ini`
- **旧版本**：`<USER_DIRECTORY>/default/ComfyUI-Manager/config.ini`

其中 `<USER_DIRECTORY>` 默认为 `ComfyUI/user`。详情请参阅[配置](/zh-CN/manager/configuration)。

在 `config.ini` 中配置安全级别：

```ini
security_level = normal
```

| 级别 | 描述 |
|------|------|
| `strong` | 不允许高风险和中风险功能 |
| `normal` | 不允许高风险功能；中风险功能可用 |
| `normal-` | 如果指定了 `--listen` 且不以 `127.` 开头，则不允许高风险功能；中风险功能可用 |
| `weak` | 所有功能可用 |

### 功能风险级别

| 风险级别 | 功能 |
|---------|------|
| **高** | 通过 git url 安装、pip install、安装不在默认频道中的自定义节点、修复自定义节点 |
| **中** | 卸载/更新、安装默认频道中的自定义节点、恢复/删除快照、重启 |
| **低** | 更新 ComfyUI |

<Tip>
要通过 git URL 或 nightly 版本安装自定义节点，请在 `config.ini` 中设置 `security_level = weak`。
</Tip>

## 获取帮助

如果您仍然遇到问题：

1. 查看 [ComfyUI-Manager GitHub issues](https://github.com/ltdrdata/ComfyUI-Manager/issues) 寻找类似问题
2. 查看启动日志消息以获取错误详情
3. 加入 [ComfyUI Discord](https://discord.com/invite/comfyorg) 获取社区支持
