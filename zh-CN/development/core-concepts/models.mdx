---
title: "模型"
icon: "cube"
---

import ExternalModels from "/snippets/zh/install/add-external-models.mdx"

{/*
description: "了解AI模型及其在ComfyUI中的作用"
*/}

## 模型是必不可少的

模型是媒体生成工作流程的核心组件。通过组合和混合，它们能够实现多样化的创意效果。

**_模型_** 一词有多种含义。在这里，它指的是一种数据文件，包含节点图执行任务所需的信息。具体来说，它是一种数据结构，用于表示某种功能。作为动词，建模意味着对某物进行表示或提供示例。

在ComfyUI中，模型数据文件的典型示例是AI **_扩散模型_**。它是一组庞大的数据集，表示文本与图像之间的复杂关系，从而实现文字与图片的相互转换。其他用于图像生成的常见模型示例包括多模态视觉和语言模型，如CLIP，以及图像放大模型，如RealESRGAN。

## 模型文件

模型文件是生成媒体制作的必需品。没有模型文件，工作流程将无法进行。ComfyUI安装包中不包含模型文件，但它通常可以自动下载并安装缺失的模型文件。许多模型可以通过**ComfyUI管理器**窗口下载和安装。模型还可以在以下网站获取：[huggingface.co](https://huggingface.co)、[civitai.green](https://civitai.green)和[github.com](https://github.com)。

### 在ComfyUI中使用模型

1. 下载并将其放置在ComfyUI程序目录中
    1. 在**models**文件夹中，您会找到各种类型模型的子文件夹，例如**checkpoints**
    2. **ComfyUI管理器**帮助自动化搜索、下载和安装的过程
    3. 如果ComfyUI正在运行，请重启它
2. 在您的工作流程中，创建适合模型类型的节点，例如**Load Checkpoints**、**Load LoRA**、**Load VAE**
3. 在加载节点中，选择您希望使用的模型
4. 将加载节点连接到工作流程中的其他节点

<ExternalModels />

### 文件大小

相对于图像文件，模型文件可能非常大。一个典型的未压缩图像可能需要几MB的磁盘存储。生成的AI模型可能大到数万倍，单个模型可达数十GB。它们占用大量磁盘空间，并且在网络上传输需要很长时间。

## 模型训练和优化

生成式AI模型是通过在非常大的数据集上训练机器学习程序创建的，例如图像和文本描述的配对。AI模型并不明确存储训练数据，而是存储数据中隐含的相关性。

像Stability AI和Black Forest Labs这样的组织和公司发布“基础”模型，这些模型携带大量通用信息。这些是通用的生成AI模型。通常，基础模型需要进行**_优化_**，以获得高质量的生成输出。一个专门的社区致力于优化基础模型。新的优化模型产生更好的输出，提供新的或不同的功能，并/或使用更少的资源。优化后的模型通常可以在计算能力和/或内存较少的系统上运行。

## 辅助模型

模型功能可以通过辅助模型进行扩展。例如，艺术指导文本到图像的工作流程以实现特定结果，单靠扩散模型可能会很困难或不可能。额外的模型可以在工作流程图中优化扩散模型，以产生所需的结果。示例包括**LoRA**（低秩适应），一个针对特定主题训练的小模型；**ControlNet**，一个使用引导图像帮助控制构图的模型；以及**Inpainting**，一个允许某些扩散模型在现有图像中生成新内容的模型。

![辅助模型](/images/concepts/core-concepts_auxiliary-model.png)

## 卸载模型

ComfyUI目前不支持通过前端界面卸载模型。如果您想要移除或卸载模型，需要手动删除系统中`ComfyUI/models/`目录下对应的模型文件。

## 常见问题

<AccordionGroup>
  <Accordion title="ComfyUI 支持 GGUF 格式的模型吗?">
    ComfyUI 原生并不支持 GGUF 格式,所以用户需要使用一些社区自定义节点来获取支持,如 [ComfyUI-GGUF](https://github.com/city96/ComfyUI-GGUF)。
  </Accordion>

  <Accordion title="为什么找不到我的模型?">
    如果您已经安装了模型但在 ComfyUI 中找不到,请尝试以下步骤:
    
    - 验证模型是否在正确的位置:
      - 对于 **ComfyUI Desktop 桌面版**: 前往**帮助**菜单 → **打开文件夹** → **打开模型文件夹**来检查模型安装路径
      - 确保您的模型文件放置在正确的子文件夹中(例如 `checkpoints`、`loras`、`vae`)
    - 安装模型后点击快捷键 `r` 来刷新节点定义,以便 ComfyUI 可以检测到
    - 重启 ComfyUI
    - 确保在模型加载节点对应的模型有被选中
  </Accordion>
</AccordionGroup>
