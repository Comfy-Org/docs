---
title: "服务器概览"
---

## 概览

Comfy 服务器构建于 [aiohttp 框架](https://docs.aiohttp.org/) 基础之上，该框架则依赖于 [asyncio](https://pypi.org/project/asyncio/) 库。

服务器向客户端发送消息时，会通过其 `send_sync` 方法（该服务器是 `server.py` 文件中定义的 `PromptServer` 类的一个实例）以 `socket` 消息的形式进行。这些消息由注册在 `api.js` 文件中的 `socket` 事件监听器负责处理。更多详情请参阅[消息传递](/essentials/comfyui-server/comms_messages.mdx)。

客户端向服务器发送消息时，则通过 `api.js` 文件中定义的 `api.fetchApi()` 方法进行，这些请求由服务器端设定的 HTTP 路由负责处理。更多详情请参阅[路由机制](/essentials/comfyui-server/comms_routes.mdx)部分。

<Tip>当您将一个请求加入处理队列时，客户端会提交完整的工作流信息（包括所有小部件的当前值）。
一旦请求进入队列，服务器将不会接收您在此之后对工作流所做的任何修改。
若希望在程序执行过程中动态调整服务器行为，则需要借助路由机制来实现。</Tip>
