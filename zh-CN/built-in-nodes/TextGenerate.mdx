---
title: "TextGenerate - ComfyUI Built-in Node Documentation"
description: "The TextGenerate node uses a CLIP model to create text based on a user's prompt. It can optionally use an image as a visual reference to guide the text generation. You can control the length of the..."
sidebarTitle: "TextGenerate"
icon: "circle"
---
> 本文档由 AI 生成。如果您发现任何错误或有改进建议，欢迎贡献！ [在 GitHub 上编辑](https://github.com/Comfy-Org/embedded-docs/blob/main/comfyui_embedded_docs/docs/TextGenerate/zh.md)

TextGenerate 节点使用 CLIP 模型根据用户的提示词生成文本。它可以选择性地使用图像作为视觉参考来引导文本生成。您可以控制输出的长度，并选择是否使用带有各种设置的随机采样，或是在不采样的情况下生成文本。

## 输入参数

| 参数 | 数据类型 | 必填 | 范围 | 描述 |
|-----------|-----------|----------|-------|-------------|
| `clip` | CLIP | 是 | 不适用 | 用于对提示词进行分词和生成文本的 CLIP 模型。 |
| `prompt` | STRING | 是 | 不适用 | 用于引导生成的文本提示词。此字段支持多行和动态提示词。默认值为空字符串。 |
| `image` | IMAGE | 否 | 不适用 | 可选的图像，可与文本提示词一起使用，以影响生成的文本。 |
| `max_length` | INT | 是 | 1 到 2048 | 模型将生成的最大令牌数。默认值为 256。 |
| `sampling_mode` | COMBO | 是 | `"on"`<br />`"off"` | 控制文本生成期间是否使用随机采样。设置为 "on" 时，用于控制采样的附加参数将变为可用。默认为 "on"。 |
| `temperature` | FLOAT | 否 | 0.01 到 2.0 | 控制输出的随机性。较低的值使输出更可预测，较高的值使其更具创造性。此参数仅在 `sampling_mode` 为 "on" 时可用。默认值为 0.7。 |
| `top_k` | INT | 否 | 0 到 1000 | 将采样池限制为最可能的前 K 个下一个令牌。值为 0 则禁用此过滤器。此参数仅在 `sampling_mode` 为 "on" 时可用。默认值为 64。 |
| `top_p` | FLOAT | 否 | 0.0 到 1.0 | 使用核心采样，将选择限制在累积概率小于此值的令牌上。此参数仅在 `sampling_mode` 为 "on" 时可用。默认值为 0.95。 |
| `min_p` | FLOAT | 否 | 0.0 到 1.0 | 设置令牌被考虑的最低概率阈值。此参数仅在 `sampling_mode` 为 "on" 时可用。默认值为 0.05。 |
| `repetition_penalty` | FLOAT | 否 | 0.0 到 5.0 | 对已生成的令牌施加惩罚以减少重复。值为 1.0 时不施加惩罚。此参数仅在 `sampling_mode` 为 "on" 时可用。默认值为 1.05。 |
| `seed` | INT | 否 | 0 到 18446744073709551615 | 当采样为 "on" 时，用于初始化随机数生成器以获得可重现结果的数字。默认值为 0。 |

**注意：** 参数 `temperature`、`top_k`、`top_p`、`min_p`、`repetition_penalty` 和 `seed` 仅在 `sampling_mode` 设置为 "on" 时在节点界面中处于活动状态并可见。

## 输出

| 输出名称 | 数据类型 | 描述 |
|-------------|-----------|-------------|
| `generated_text` | STRING | 模型根据输入提示词和可选图像生成的文本。 |
