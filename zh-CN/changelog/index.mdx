---
title: "更新日志"
description: "跟踪 ComfyUI 的最新功能、改进和错误修复"
icon: "clock-rotate-left"
---

<Update label="v0.3.49" description="2025年8月5日">

**增强的用户界面体验与先进模型支持**

此版本带来了重大的用户体验改进和前沿的模型支持，提升了工作流创建和在各种AI应用中的性能表现：

### 用户界面增强
- **最近使用项目 API**：新增用于跟踪界面中最近使用项目的 API，通过提供对常用节点和组件的快速访问来简化工作流创建
- **改进的工作流导航**：通过更好地组织常用元素来增强用户体验，减少搜索节点所花费的时间

### 先进模型集成
- **Qwen 视觉模型支持**：初步支持 Qwen 图像模型，包含全面的配置选项，包括默认偏移设置和灵活的潜在空间尺寸处理
- **优化的图像处理**：增强的 Qwen 模型集成允许更多样化的图像分析和生成工作流，扩展了视觉任务的AI能力

### 革命性的视频生成
- **Veo3 视频生成**：添加了强大的 Veo3 视频生成节点，集成了音频支持，使创作者能够直接在 ComfyUI 工作流中制作具有同步音频的高质量视频内容
- **音视频合成**：突破性功能，在单个节点中结合视频和音频生成，非常适合内容创作者和多媒体专业人士

### 性能与稳定性改进
- **增强的内存管理**：通过改进的类型转换和设备传输操作优化条件 (cond) VRAM 使用，减少复杂生成任务期间的内存开销
- **设备一致性**：全面修复确保所有条件数据和上下文保持在正确的设备上，防止崩溃并提高工作流可靠性
- **ControlNet 稳定性**：解决了关键的 ControlNet 兼容性问题，恢复了精确图像控制工作流的完整功能

### 开发者与系统增强
- **强大的错误处理**：当条件设备不匹配时添加智能警告和崩溃预防，改进工作流调试和稳定性
- **模板更新**：多个模板版本更新 (0.1.47, 0.1.48, 0.1.51)，保持与最新开发标准的兼容性，确保平滑的节点集成

### 工作流优势
- **更快的迭代**：最近使用项目 API 实现更快的工作流组装和修改
- **增强的创造力**：Qwen 视觉模型为图像理解和操作工作流开辟了新的可能性
- **专业视频制作**：Veo3 集成将 ComfyUI 转变为综合的多媒体创作平台
- **改进的可靠性**：内存优化和设备管理修复确保复杂的多模型工作流稳定运行
- **更好的性能**：优化的 VRAM 使用允许在资源有限的系统上进行更雄心勃勃的项目

此版本显著扩展了 ComfyUI 的功能，特别是对于使用先进视觉模型的多媒体创作者和专业人士，同时通过更好的界面组织和增强的系统稳定性改善了整体用户体验。

</Update>
<Update label="v0.3.48" description="2025年8月2日">

**核心 API 增强与性能优化**

此版本引入了重要的后端改进和性能优化，增强了工作流执行和节点开发能力：

### ComfyAPI 核心框架
- **ComfyAPI Core v0.0.2**：核心 API 框架的重大更新，为自定义节点开发和第三方集成提供了更好的稳定性和可扩展性
- **部分执行支持**：新的后端支持部分工作流执行，通过允许选择性节点执行，实现复杂多阶段工作流的更高效处理

### 视频处理改进
- **WAN Camera 内存优化**：增强了基于 WAN 的相机工作流的内存管理，减少视频处理操作期间的 VRAM 使用
- **WanFirstLastFrameToVideo 修复**：解决了当 clip vision 组件不可用时阻止正确生成视频的关键问题，提高了工作流可靠性

### 性能与模型优化
- **VAE 非线性增强**：在 VAE 操作中用优化的 torch.silu 替换手动激活函数，为图像编码/解码提供更好的性能和数值稳定性
- **WAN VAE 优化**：对 WAN VAE 操作进行额外的微调优化，提高视频生成工作流中的处理速度和内存效率

### 节点架构演进
- **V3 节点架构定义**：下一代节点架构系统的初始实现，为增强节点类型定义和改进工作流验证奠定基础
- **模板更新**：多个模板版本更新（0.1.44、0.1.45），确保与最新节点开发标准和最佳实践的兼容性

### 工作流开发优势
- **增强的视频工作流**：改善了视频生成管道的稳定性和性能，特别是那些使用基于 WAN 模型的工作流
- **更好的内存管理**：优化的内存使用模式使有限 VRAM 系统能够运行更复杂的工作流
- **改进的 API 可靠性**：核心 API 增强为自定义节点开发和工作流自动化提供了更稳定的基础
- **部分执行灵活性**：新的部分执行功能允许更高效的调试和迭代式工作流开发

这些基础性改进强化了 ComfyUI 的核心架构，同时为视频处理工作流和内存密集型操作提供即时收益，使平台对于休闲创作者和专业 AI 开发工作流都更加强大。

</Update>
<Update label="v0.3.47" description="2025年7月30日">

**内存优化与大模型性能**

本次发布专注于大模型工作流的关键内存优化，特别是改进了 WAN 2.2 模型的性能，并增强了高端显卡的 VRAM 管理：

### WAN 2.2 模型优化
- **减少内存占用**：去除了 WAN 2.2 VAE 操作中不必要的内存克隆，显著减少了图像编码/解码工作流中的内存使用
- **5B I2V 模型支持**：对 WAN 2.2 5B 图像到视频模型进行内存优化，使这些模型对 VRAM 有限的创作者更加易用

### 增强的 VRAM 管理
- **Windows 大显卡支持**：为 Windows 上的高端显卡增加了额外的保留 VRAM 分配，防止在密集生成工作流中出现系统不稳定
- **更好的内存分配**：改进了同时使用多个大模型的用户的内存管理

### 工作流性能优势
- **更快的 VAE 处理**：WAN 2.2 VAE 操作现在运行更高效，内存开销更少，实现更流畅的图像生成管道
- **稳定的大模型推理**：增强了处理数十亿参数模型时的稳定性
- **改进的批处理**：内存优化使大模型的批操作处理能力更强

这些针对性优化使 ComfyUI 在涉及大体量模型的专业工作流中更加可靠。

</Update>
<Update label="v0.3.46" description="2025年7月28日">

**硬件加速和音频处理改进**

此版本专注于扩展硬件支持并增强工作流创建者的音频处理能力：

### 音频处理增强
- **PyAV 音频后端**：用 PyAV 替换 torchaudio.load，在视频工作流中提供更可靠的音频处理，改善兼容性和性能
- **更好的音频集成**：增强多媒体生成工作流的音频处理，特别有利于视频内容创作者

### 扩展的硬件支持
- **Iluvatar CoreX 支持**：添加对 Iluvatar CoreX 加速器的原生支持，为 AI 推理扩展硬件选项
- **Intel XPU 优化**：全面的 XPU 支持改进，包括异步卸载功能和设备特定优化
- **AMD ROCm 增强**：在 Torch 2.8 上为 gfx1201 默认启用 PyTorch attention，提升 AMD 硬件性能
- **CUDA 内存管理**：修复 CUDA malloc 仅在启用 CUDA 的 PyTorch 安装上激活，防止在其他平台上发生冲突

### 采样算法改进
- **Euler CFG++ 增强**：在 Euler CFG++ 采样器中分离去噪和噪声估计过程，改善数值精度和质量
- **WAN 模型支持**：添加对 WAN（基于小波的注意力网络）模型的全面支持，包括 ATI 支持和 WAN 2.2 兼容性

### 高级训练功能
- **增强的训练节点**：向训练工作流添加算法支持、梯度累积和可选梯度检查点
- **改进的训练灵活性**：为自定义模型训练提供更好的内存管理和性能优化

### 节点和工作流增强
- **Moonvalley V2V 节点**：添加 Moonvalley Marey V2V 节点，为视频到视频工作流提供增强的输入验证
- **负面提示词更新**：改进 Moonvalley 节点的负面提示词处理，提供对生成输出的更好控制
- **历史 API 增强**：向 get_history API 添加 map_function 参数，实现更灵活的工作流历史管理

### API 和系统改进
- **前端版本跟踪**：在 /system_stats API 响应中添加 required_frontend_version 参数，改善版本兼容性
- **设备信息**：增强 XPU 设备名称打印，改善硬件识别和调试
- **模板更新**：多个模板更新（0.1.40、0.1.41），确保与最新节点开发标准的兼容性

### 开发者体验
- **文档更新**：使用 HiDream E1.1 示例增强 README，并更新模型集成指南
- **行结束符修复**：通过标准化工作流中的行结束符改善跨平台兼容性
- **代码清理**：移除已弃用的代码并优化各种组件以提高可维护性

这些改进使 ComfyUI 在不同硬件平台上更易于使用，同时增强了现代多媒体 AI 工作流所必需的音频处理能力。

</Update>
<Update label="v0.3.45" description="2025年7月21日">

**高级采样与训练基础设施改进**

本版本为AI研究人员和工作流程创建者引入了采样算法、训练功能和节点功能的重大增强：

### 新的采样和生成功能
- **SA-Solver采样器**：新的重构SA-Solver采样算法，为复杂生成工作流提供增强的数值稳定性和质量
- **实验性CFGNorm节点**：高级无分类器引导标准化，用于改进生成质量和风格一致性的控制
- **嵌套双CFG支持**：为DualCFGGuider节点添加嵌套风格配置，提供更复杂的引导控制模式
- **SamplingPercentToSigma节点**：用于从采样百分比精确计算sigma的新实用节点，提高工作流程灵活性

### 增强的训练功能
- **多图像-描述数据集支持**：LoRA训练节点现在可以同时处理多个图像-描述数据集，简化训练工作流程
- **更好的训练循环实现**：优化的训练算法，在模型微调过程中改善收敛性和稳定性
- **增强的错误检测**：为LoRA操作添加模型检测错误提示，在出现问题时提供更清晰的反馈

### 平台和性能改进
- **异步节点支持**：完全支持异步节点函数，优化早期执行，改善I/O密集型操作的工作流程性能
- **Chroma灵活性**：在Chroma中取消硬编码的patch_size参数，允许更好地适应不同的模型配置
- **LTXV VAE解码器**：切换到改进的默认填充模式，提高LTXV模型的图像质量
- **Safetensors内存管理**：为mmap问题添加解决方案，提高加载大型模型文件时的可靠性

### API和集成增强
- **自定义提示ID**：API现在允许指定提示ID，以便更好地跟踪和管理工作流程
- **Kling API优化**：增加轮询超时时间，防止视频生成工作流程中的用户超时
- **历史令牌清理**：从历史项目中删除敏感令牌以提高安全性
- **Python 3.9兼容性**：修复兼容性问题，确保更广泛的平台支持

### 错误修复和稳定性
- **MaskComposite修复**：解决目标蒙版具有2个维度时的错误，提高蒙版工作流程可靠性
- **Fresca输入/输出**：修正Fresca模型工作流程的输入和输出处理
- **引用错误修复**：解决Gemini节点实现中的错误引用问题
- **行结束标准化**：自动检测和删除Windows行结束符，确保跨平台一致性

### 开发者体验
- **警告系统**：添加torch导入错误警告，以捕获常见配置问题
- **模板更新**：多个模板版本更新（0.1.36、0.1.37、0.1.39），改进自定义节点开发
- **文档**：增强便携式配置中fast_fp16_accumulation的文档

这些改进使ComfyUI在生产工作流程中更加稳健，同时引入了对高级AI研究和创意应用必不可少的强大新采样技术和训练功能。

</Update>
<Update label="v0.3.44" description="2025年7月8日">

**高级采样和模型控制增强**

此版本在采样算法和模型控制系统方面提供了重大改进，特别有利于高级AI研究人员和工作流创建者：

### 新采样功能
- **TCFG节点**：增强的分类器无关引导控制，为您的工作流提供更细致的生成控制
- **ER-SDE采样器**：从VE迁移到VP算法，配备新的采样器节点，为复杂生成任务提供更好的数值稳定性
- **跳层引导（SLG）**：用于推理期间精确层级控制的替代实现，完美适用于高级模型导向工作流

### 增强的开发工具
- **自定义节点管理**：新的`--whitelist-custom-nodes`参数与`--disable-all-custom-nodes`配对，提供精确的开发控制
- **性能优化**：双CFG节点现在在CFG为1.0时自动优化，减少计算开销
- **GitHub Actions集成**：自动化发布webhook通知让开发者及时了解新更新

### 图像处理改进
- **新变换节点**：添加了ImageRotate和ImageFlip节点，增强图像操作工作流
- **ImageColorToMask修复**：修正了掩码值返回，提供更准确的基于颜色的掩码操作
- **3D模型支持**：上传3D模型到自定义子文件夹，为复杂项目提供更好的组织

### 引导和条件增强
- **PerpNeg引导器**：更新了改进的前后CFG处理以及性能优化
- **潜在条件修复**：解决了多步骤工作流中索引 > 0 的条件问题
- **去噪步骤**：为多个采样器添加去噪步骤支持，获得更清洁的输出

### 平台稳定性
- **PyTorch兼容性**：修复了PyTorch nightly构建的连续内存问题
- **FP8回退**：当FP8操作遇到异常时自动回退到常规操作
- **音频处理**：移除了已弃用的torchaudio.save函数依赖并修复警告

### 模型集成
- **Moonvalley节点**：为Moonvalley模型工作流添加原生支持
- **调度器重新排序**：简单调度器现在默认优先，提供更好的用户体验
- **模板更新**：多个模板版本更新（0.1.31-0.1.35），改进自定义节点开发

### 安全性和安全保护
- **安全加载**：在不安全加载文件时添加警告，文档说明检查点文件默认安全加载
- **文件验证**：增强检查点加载安全措施，确保工作流安全执行

这些改进使ComfyUI在生产工作流中更加稳健，同时为使用高级采样技术和模型控制系统的AI艺术家扩展了创作可能性。

</Update>
<Update label="v0.3.43" description="2025年6月30日">

**增强模型支持与工作流可靠性**

本次发布在模型兼容性和工作流稳定性方面带来了重大改进：

- **扩展模型文档**：为 Flux Kontext 和 Omnigen 2 模型添加了全面的支持文档，让创作者更容易将这些强大的模型集成到他们的工作流中
- **VAE 编码改进**：移除了 VAE 编码过程中不必要的随机噪声注入，使工作流运行的输出更加一致和可预测
- **内存管理修复**：解决了专门影响 Kontext 模型使用的关键内存估算错误，防止内存不足错误并提高工作流稳定性

这些变更提升了高级模型工作流的可靠性，同时保持了 ComfyUI 为从事前沿生成模型工作的 AI 艺术家和研究人员提供的灵活性。

</Update>

<Update label="v0.3.41" description="2025年6月17日">

**主要模型支持新增**
- **Cosmos Predict2 支持**：全面实现文本到图像（2B 和 14B 模型）和图像到视频生成工作流，扩展视频创作功能
- **增强的 Flux 兼容性**：Chroma Text Encoder 现在能与常规 Flux 模型无缝协作，提升文本条件质量
- **LoRA 训练集成**：使用权重适配器方案的全新原生 LoRA 训练节点，支持在 ComfyUI 工作流中直接进行模型微调

**性能和硬件优化**
- **AMD GPU 增强**：在 GFX1201 和其他兼容的 AMD GPU 上启用 FP8 操作和 PyTorch 注意力机制，加速推理
- **Apple Silicon 修复**：解决了 Apple 设备上长期存在的 FP16 注意力问题，提升 Mac 用户的稳定性
- **Flux 模型稳定性**：解决了特定 Flux 模型在 FP16 精度下生成黑色图像的问题

**高级采样改进**
- **Rectified Flow (RF) 采样器**：新增支持 RF 的 SEEDS 和多步 DPM++ SDE 采样器，为前沿模型提供更多采样选项
- **ModelSamplingContinuousEDM**：新增 cosmos_rflow 选项，增强对 Cosmos 模型的采样控制
- **内存优化**：改进了支持无限分辨率的 Cosmos 模型的内存估算

**开发者和集成功能**
- **SQLite 数据库支持**：增强自定义节点和工作流存储的数据管理功能
- **PyProject.toml 集成**：从 pyproject 文件自动注册 web 文件夹和配置设置
- **前端灵活性**：支持语义化版本后缀和预发布前端版本，适用于自定义部署
- **分词器增强**：通过 tokenizer_data 配置 min_length 设置，优化文本处理

**使用体验改进**
- **Kontext 宽高比修复**：解决了仅限小组件的限制，现在在所有连接模式下都能正常工作
- **SaveLora 一致性**：统一所有保存节点的文件名格式，优化文件组织
- **Python 版本警告**：为过时的 Python 安装添加警报，防止兼容性问题
- **WebcamCapture 修复**：修正了 IS_CHANGED 签名，确保实时输入工作流的可靠性

此版本显著扩展了 ComfyUI 的模型生态系统支持，同时提供了关键的稳定性改进和跨平台硬件兼容性增强。

</Update>


<Update label="v0.3.40" description="2025年6月5日">

本次发布为 ComfyUI 创作者带来了强大的新工作流实用工具和性能优化：

### 新的工作流工具
- **ImageStitch 节点**：在工作流中无缝拼接多个图像 - 非常适合创建对比网格或复合输出
- **GetImageSize 节点**：提取图像尺寸并支持批处理，对于动态调整大小的工作流至关重要
- **Regex Replace 节点**：高级文本处理功能，适用于提示词工程和字符串处理工作流

### 增强的模型兼容性
- **改进的张量处理**：简化的列表处理使复杂的多模型工作流更加可靠
- **BFL API 优化**：完善了对 Kontext [pro] 和 [max] 模型的支持，提供更清晰的节点界面
- **性能提升**：在色度处理中使用融合乘加运算，加快生成速度

### 开发者体验改进
- **自定义节点支持**：添加 pyproject.toml 支持，改善自定义节点依赖管理
- **帮助菜单集成**：在节点库侧边栏中新增帮助系统，加快节点发现速度
- **API 文档**：增强 API 节点文档，支持工作流自动化

### 前端和 UI 增强
- **前端更新至 v1.21.7**：多项稳定性修复和性能改进
- **自定义 API 基础支持**：改进了自定义部署配置的子路径处理
- **安全加固**：修复 XSS 漏洞，确保工作流分享更安全

### 错误修复和稳定性
- **Pillow 兼容性**：更新了已弃用的 API 调用，保持与最新图像处理库的兼容性
- **ROCm 支持**：改进了 AMD GPU 用户的版本检测
- **模板更新**：增强了自定义节点开发的项目模板

这些更新强化了 ComfyUI 处理复杂 AI 工作流的基础，同时通过改进的文档和辅助工具让平台对新用户更加友好。

</Update>
