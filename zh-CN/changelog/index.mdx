---
title: "更新日志"
description: "跟踪 ComfyUI 的最新功能、改进和错误修复"
icon: "clock-rotate-left"
---

<Update label="v0.3.40" description="2024年12月26日">

本次发布为 ComfyUI 创作者带来了强大的新工作流实用工具和性能优化：

## 新的工作流工具
- **ImageStitch 节点**：在工作流中无缝拼接多个图像 - 非常适合创建对比网格或复合输出
- **GetImageSize 节点**：提取图像尺寸并支持批处理，对于动态调整大小的工作流至关重要
- **Regex Replace 节点**：高级文本处理功能，适用于提示词工程和字符串处理工作流

## 增强的模型兼容性
- **改进的张量处理**：简化的列表处理使复杂的多模型工作流更加可靠
- **BFL API 优化**：完善了对 Kontext [pro] 和 [max] 模型的支持，提供更清晰的节点界面
- **性能提升**：在色度处理中使用融合乘加运算，加快生成速度

## 开发者体验改进
- **自定义节点支持**：添加 pyproject.toml 支持，改善自定义节点依赖管理
- **帮助菜单集成**：在节点库侧边栏中新增帮助系统，加快节点发现速度
- **API 文档**：增强 API 节点文档，支持工作流自动化

## 前端和 UI 增强
- **前端更新至 v1.21.7**：多项稳定性修复和性能改进
- **自定义 API 基础支持**：改进了自定义部署配置的子路径处理
- **安全加固**：修复 XSS 漏洞，确保工作流分享更安全

## 错误修复和稳定性
- **Pillow 兼容性**：更新了已弃用的 API 调用，保持与最新图像处理库的兼容性
- **ROCm 支持**：改进了 AMD GPU 用户的版本检测
- **模板更新**：增强了自定义节点开发的项目模板

这些更新强化了 ComfyUI 处理复杂 AI 工作流的基础，同时通过改进的文档和辅助工具让平台对新用户更加友好。

</Update>
