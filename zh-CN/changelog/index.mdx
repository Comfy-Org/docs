---
title: "更新日志"
description: "跟踪ComfyUI的最新功能、改进和错误修复"
icon: "clock-rotate-left"
---

<Update label="v0.3.55" description="2025年8月29日">

**音频转视频工作流增强与模型支持扩展**

本次发布专注于改进音视频工作流功能并扩展模型支持，特别是针对音频转视频生成和最新的Wan2.2 5B模型：

**音频转视频工作流控制**
- **WanSoundImageToVideoExtend节点**：全新的音频转视频工作流手动视频扩展节点，为创作者提供对生成视频长度和时间的精确控制。这使得对音频内容如何转换为视频序列的精细调控成为可能。
- **音视频同步**：修复了当视频扩展超过音频长度时导致工作流失败的关键问题，确保无论音频持续时间如何都能可靠地生成音频转视频内容。
- **自动音频裁剪**：视频保存现在会自动将音频裁剪至匹配视频长度，消除最终输出文件中的音视频同步问题。

**高级潜在空间处理**
- **LatentCut节点**：用于在精确点位切割潜在变量的新节点，在复杂生成工作流中实现对潜在空间操作的更精细控制。这对于批处理和时序视频工作流特别有用。

**Wan2.2 5B模型集成**
- **Fun Control模型支持**：增加了对Wan2.2 5B fun control模型的支持，通过增强的参数操作为视频生成扩展了创意控制选项。
- **Fun Inpaint模型支持**：集成了Wan2.2 5B fun inpaint模型，为视频工作流提供高级修复功能，具有更好的质量和一致性。

**模板系统更新**
- **模板v0.1.70**：更新了模板系统，集成了最新的模型和工作流示例，确保用户能够访问针对新功能优化的设置。

这些改进显著增强了ComfyUI在音视频内容创作方面的能力，通过最新的Wan2.2模型系列提供了更可靠的音频转视频工作流和扩展的创意控制。

</Update>

<Update label="v0.3.54" description="2025年8月28日">

**节点模型补丁改进**

此次专项更新改进了支撑 ComfyUI 灵活架构的核心节点模型补丁系统：

**核心基础设施增强**
- **节点模型补丁更新**：增强了 nodes_model_patch.py，改进了底层模型补丁机制，该机制支持 ComfyUI 的动态节点系统和模型加载功能

**工作流程优势**
- **增强的稳定性**：核心模型补丁改进有助于在不同工作流程配置中实现更可靠的节点执行和模型处理
- **基础更新**：这些后端改进为未来模型架构和节点实现的更好兼容性奠定了基础

</Update>

<Update label="v0.3.53" description="2025年8月28日">

**音频工作流集成与增强性能优化**

此版本大幅扩展了 ComfyUI 的音频处理能力，同时提供了关键的性能改进和模型兼容性增强：

**音频处理革命**
- **Wav2vec2 音频编码器**：新增原生 wav2vec2 实现作为音频编码器模型，为多模态 AI 应用启用复杂的音频到嵌入工作流
- **音频编码器目录**：引入专用的 models/audio_encoders 目录结构，用于有序的音频模型管理
- **AudioEncoderOutput V3 支持**：使 AudioEncoderOutput 与 V3 节点架构兼容，确保与现代工作流架构的无缝集成

**Google Gemini API 集成**
- **Gemini Image API 节点**：@Kosinkadink 提供的全新 Google Gemini Image API 节点，可直接集成 Google 的视觉 AI 功能，为工作流扩展基于云的图像分析选项

**视频生成性能与内存优化**
- **WAN 2.2 S2V 模型支持**：正在开发的 WAN 2.2 声音到视频模型实现，具有优化的内存使用和性能
- **增强的 S2V 性能**：对超过120帧的视频生成进行显著性能改进，使扩展视频工作流更加实用
- **更好的内存估算**：改进 S2V 工作流的内存使用估算，防止长视频生成期间出现内存不足错误
- **负音频处理**：修复 S2V 工作流中负音频输入处理，使用适当的零值

**采样与节点增强**
- **DPM++ 2M SDE Heun (RES) 采样器**：@Balladie 提供的全新高级采样器，为精细调节生成控制提供额外的采样选项
- **LatentConcat 节点**：用于连接潜在张量的新节点，启用高级潜在空间操作工作流
- **EasyCache/LazyCache 稳定性**：修复当张量属性（形状/数据类型/设备）在采样期间发生变化时的关键崩溃问题，确保工作流可靠性

**模型兼容性改进**
- **ControlNet 类型模型**：增强与 Qwen Edit 和 Kontext 工作流配合使用的 ControlNet 类型模型的兼容性修复
- **Flux 内存优化**：调整 Flux 模型内存使用因子以获得更好的资源利用

**基础设施与可靠性**
- **模板更新**：更新至 0.1.66 和 0.1.68 版本，包含最新的工作流模板和改进
- **文档清理**：从自述文件中移除未完全实现的模型，以避免用户混淆

此版本特别有利于从事结合音频、图像和视频生成的多模态 AI 工作流的创作者，同时为所有用户提供基本的稳定性改进。

</Update>
<Update label="v0.3.52" description="2025年8月23日">

**增强模型支持和 Qwen Image ControlNet 集成等**

此版本显著扩展了 ControlNet 功能并改进了模型兼容性，让 ComfyUI 工作流更加多样化和可靠：

**Qwen ControlNet 生态系统**
- **Diffsynth ControlNet 支持**：新增支持 Qwen Diffsynth ControlNet 的 Canny 和深度条件控制，实现精确的边缘和基于深度的图像控制
- **InstantX Qwen ControlNet**：集成 InstantX Qwen ControlNet，扩展创意控制选项
- **修复补丁 ControlNet/模型**：通过专用的 Diffsynth 修复 ControlNet 支持增强修复功能

**节点架构和 API 演进**
- **V3 架构迁移**：字符串节点、Google Veo API 和 Ideogram API 节点升级到 V3 架构，提供更好的性能和一致性
- **增强的 API 节点**：OpenAI Chat 节点重命名为"OpenAI ChatGPT" 提高辨识度，Gemini Chat 节点现在包含复制按钮功能
- **改进的可用性**：API 节点现在通过更清晰的标签和增强的交互功能提供更好的用户体验

**工作流可靠性和性能**
- **LTXV 噪声遮罩修复**：解决了存在真实噪声遮罩时关键帧噪声遮罩维度问题，确保视频工作流执行稳定
- **3D 潜在条件控制**：修复了 3D 潜在空间的条件遮罩，在高级工作流中启用适当的深度感知条件控制
- **无效文件名处理**：通过正确处理无效文件名改进工作流保存功能，防止保存失败
- **EasyCache 和 LazyCache**：实现高级缓存系统以改进工作流执行性能

**平台和开发改进**
- **Python 3.13 支持**：完全兼容 Python 3.13，保持 ComfyUI 与最新 Python 发展同步
- **前端更新**：更新到 v1.25.10，改进导航和用户界面增强功能
- **逐元素融合**：通过逐元素操作融合添加性能优化
- **导航模式回滚**：回滚导航默认到传统旧版模式，避免默认启用新版标准导航模式导致用户体验问题，用户仍旧可以在设置中启用标准导航模式
</Update>

<Update label="v0.3.51" description="2025年08月20日">

**模型支持**
- **Qwen-Image-Edit模型**：原生支持 Qwen-Image-Edit
- **FluxKontextMultiReferenceLatentMethod 节点**：用于 Flux 工作流的多图参考输入节点
- **WAN 2.2 Fun Camera模型支持**：支持通过相机控制生成视频
- **模板更新**：升级到版本 0.1.62，新增了 Wan2.2 Fun Camera 和 Qwen Image Edit 等模板

**核心功能改进**
- **Context Windows上下文节点支持**：增强采样代码，支持更长序列的生成任务
- **SDPA 后端优化**：改进缩放点积注意力后端设置，提升性能

**多媒体节点支持**
- **音频录制节点**：新增原生音频录制节点，现在你可以直接在 ComfyUI内录制音频
- **音频视频集成**：完善音频-视频依赖项集成

**API节点支持更新**
- **GPT-5 系列模型**：支持最新的 GPT-5 模型
- **Kling V2-1 和 V2-1-Master**：更新视频生成模型功能
- **Minimax Hailuo 视频节点**：新增视频生成节点
- **Vidu 视频节点**：Vidu API 节点支持
- **Google 模型更新**：新增 Google Gemini 的新模型
- **OpenAI API 修复**：修复 OpenAI API 节点输入图像的 MIME 类型导致的错误

**性能优化**
- **Intel GPU 兼容性**：修复 Intel 集成 GPU 兼容性问题
- **PyTorch 兼容性**：增强与旧版 PyTorch 的兼容性
- **Torch Compile 优化**：改进 torch compile 行为
- **内存管理**：优化安装大小和内存效率

**前端变更**
- **子图支持**：子图功能支持
- **快捷键面板**： 新增底部快捷键面板
- **修改 UI 布局**：修改终端入口布局，增加模板，日志面板等多个入口
- **新增标准画布模式**： 新增标注画布模式，可在 lite-graph(画面) Canvas > 画布导航模式中切换
- **新增小地图**： 新增工作流迷你地图
- **新增Tab预览**： 新增工作流 tab 预览
- **调整顶部 Tab 菜单布局**

</Update>

<Update label="v0.3.50" description="2025年8月13日">

**模型集成与性能提升**

本次更新扩展了ComfyUI的模型支持，优化了API功能，并提升了工作流程的稳定性：

**Qwen模型生态**
- **Qwen图像模型支持**：改进了LoRA加载和模型合并功能，支持更复杂的视觉工作流程
- **Qwen模型合并节点**：新增节点，支持合并Qwen图像模型
- **SimpleTuner Lycoris LoRA支持**：扩展了对Qwen-Image模型的Lycoris LoRA兼容性

**API与性能**
- **异步API节点**：引入异步API节点，支持非阻塞工作流程执行
- **内存处理优化**：RepeatLatentBatch节点改进，能正确处理多维latent
- **WAN 2.2 Fun Control支持**：新增对WAN 2.2 fun control功能的支持

**硬件优化**
- **AMD GPU改进**：提升了AMD Radeon的FP16精度处理和性能
- **RDNA3架构修复**：解决了gfx1201 GPU使用Flux模型的问题
- **PyTorch支持更新**：升级了CUDA和ROCM PyTorch版本

**开发体验**
- **日志记录优化**：功能标志仅在详细模式下显示
- **音频处理安全**：增强了torchaudio导入安全检查
- **Kling API改进**：修复了Kling Image API节点的图像类型参数

</Update>
<Update label="v0.3.49" description="2025年8月5日">

**界面优化与模型支持**

此版本改进了用户体验，增加了前沿模型支持：

**用户界面**
- **最近项目 API**：新增跟踪最近使用项目的API
- **工作流导航优化**：改进了常用元素的组织

**模型集成**
- **Qwen视觉模型支持**：初步支持Qwen图像模型
- **图像处理优化**：增强了Qwen模型集成

**视频生成**
- **Veo3视频生成**：新增Veo3视频生成节点，支持音频
- **音视频合成**：在单个节点中结合视频和音频生成

**性能与稳定**
- **内存管理优化**：优化了条件VRAM使用
- **设备一致性**：修复了条件数据和上下文的设备问题
- **ControlNet稳定性**：解决了ControlNet兼容性问题

**开发与系统**
- **错误处理**：添加了条件设备不匹配的警告
- **模板更新**：更新了多个模板版本

</Update>
<Update label="v0.3.48" description="2025年8月2日">

**API增强与性能优化**

此版本引入了后端改进和性能优化：

**ComfyAPI框架**
- **ComfyAPI Core v0.0.2**：核心API框架更新，提升了稳定性和可扩展性
- **部分执行支持**：新增后端支持部分工作流执行

**视频处理**
- **WAN Camera内存优化**：改进了基于WAN的相机工作流内存管理
- **WanFirstLastFrameToVideo修复**：解决了视频生成的关键问题

**性能与模型**
- **VAE优化**：在VAE操作中优化了torch.silu
- **WAN VAE优化**：对WAN VAE操作进行了优化

**节点架构**
- **V3节点架构**：实现了下一代节点架构系统
- **模板更新**：更新了多个模板版本

</Update>
<Update label="v0.3.47" description="2025年7月30日">

**内存优化与大模型性能**

本次更新优化了大模型工作流的内存使用：

**WAN 2.2模型**
- **内存占用减少**：减少了WAN 2.2 VAE操作的内存使用
- **5B I2V模型支持**：优化了WAN 2.2 5B图像到视频模型

**VRAM管理**
- **Windows大显卡支持**：为Windows高端显卡增加了VRAM分配
- **内存分配改进**：改进了多大模型用户的内存管理

</Update>
<Update label="v0.3.46" description="2025年7月28日">

**硬件加速和音频处理**

此版本扩展了硬件支持并增强了音频处理：

**音频处理**
- **PyAV音频后端**：用PyAV替换torchaudio.load
- **音频集成优化**：增强了多媒体生成工作流的音频处理

**硬件支持**
- **Iluvatar CoreX支持**：添加了对Iluvatar CoreX加速器的支持
- **Intel XPU优化**：改进了XPU支持
- **AMD ROCm增强**：在Torch 2.8上为gfx1201启用了PyTorch attention
- **CUDA内存管理**：修复了CUDA malloc激活问题

**采样算法**
- **Euler CFG++增强**：分离了去噪和噪声估计过程
- **WAN模型支持**：添加了对WAN模型的全面支持

**训练功能**
- **训练节点增强**：添加了算法支持、梯度累积和可选梯度检查点
- **训练灵活性**：提供了更好的内存管理和性能优化

**节点和工作流**
- **Moonvalley V2V节点**：添加了Moonvalley Marey V2V节点
- **负面提示词更新**：改进了Moonvalley节点的负面提示词处理
- **历史API增强**：向get_history API添加了map_function参数

**API和系统**
- **前端版本跟踪**：在/system_stats API响应中添加了required_frontend_version
- **设备信息**：增强了XPU设备名称打印
- **模板更新**：更新了多个模板版本

**开发体验**
- **文档更新**：增强了README和模型集成指南
- **行结束符修复**：标准化了工作流中的行结束符
- **代码清理**：移除了已弃用的代码

</Update>
<Update label="v0.3.45" description="2025年7月21日">

**采样与训练功能改进**

本版本增强了采样算法和训练功能：

**采样和生成功能**
- **SA-Solver采样器**：新的重构SA-Solver采样算法
- **实验性CFGNorm节点**：无分类器引导标准化节点
- **嵌套双CFG支持**：为DualCFGGuider节点添加嵌套风格配置
- **SamplingPercentToSigma节点**：用于计算sigma的新实用节点

**训练功能**
- **多数据集支持**：LoRA训练节点支持多个图像-描述数据集
- **训练循环优化**：优化了训练算法
- **错误检测增强**：为LoRA操作添加了模型检测错误提示

**平台和性能**
- **异步节点支持**：完全支持异步节点函数
- **Chroma灵活性**：取消了Chroma中硬编码的patch_size参数
- **LTXV VAE解码器**：切换到改进的默认填充模式
- **Safetensors内存管理**：为mmap问题添加了解决方案

**API和集成**
- **自定义提示ID**：API允许指定提示ID
- **Kling API优化**：增加了轮询超时时间
- **历史令牌清理**：从历史项目中删除了敏感令牌
- **Python 3.9兼容性**：修复了兼容性问题

**错误修复和稳定性**
- **MaskComposite修复**：解决了目标蒙版的错误
- **Fresca输入/输出**：修正了Fresca模型工作流程的处理
- **引用错误修复**：解决了Gemini节点实现中的引用问题
- **行结束标准化**：自动检测和删除Windows行结束符

**开发体验**
- **警告系统**：添加了torch导入错误警告
- **模板更新**：更新了多个模板版本
- **文档**：增强了fast_fp16_accumulation的文档

</Update>
<Update label="v0.3.44" description="2025年7月8日">

**采样和模型控制增强**

此版本改进了采样算法和模型控制系统：

**新采样功能**
- **TCFG节点**：增强的分类器无关引导控制
- **ER-SDE采样器**：从VE迁移到VP算法
- **跳层引导（SLG）**：用于推理期间精确层级控制

**开发工具**
- **自定义节点管理**：新的`--whitelist-custom-nodes`参数
- **性能优化**：双CFG节点在CFG为1.0时自动优化
- **GitHub Actions集成**：自动化发布webhook通知

**图像处理**
- **新变换节点**：添加了ImageRotate和ImageFlip节点
- **ImageColorToMask修复**：修正了掩码值返回
- **3D模型支持**：上传3D模型到自定义子文件夹

**引导和条件**
- **PerpNeg引导器**：更新了前后CFG处理
- **潜在条件修复**：解决了多步骤工作流中的条件问题
- **去噪步骤**：为多个采样器添加去噪步骤支持

**平台稳定性**
- **PyTorch兼容性**：修复了PyTorch nightly构建的问题
- **FP8回退**：当FP8操作遇到异常时自动回退
- **音频处理**：移除了已弃用的torchaudio.save函数依赖

**模型集成**
- **Moonvalley节点**：为Moonvalley模型工作流添加原生支持
- **调度器重新排序**：简单调度器现在默认优先
- **模板更新**：更新了多个模板版本

**安全性**
- **安全加载**：在不安全加载文件时添加警告
- **文件验证**：增强检查点加载安全措施

</Update>
<Update label="v0.3.43" description="2025年6月30日">

**模型支持与工作流可靠性**

本次更新改进了模型兼容性和工作流稳定性：

**扩展模型文档**：为Flux Kontext和Omnigen 2模型添加了支持文档
**VAE编码改进**：移除了VAE编码过程中不必要的随机噪声注入
**内存管理修复**：解决了影响Kontext模型使用的关键内存估算错误

</Update>

<Update label="v0.3.41" description="2025年6月17日">

**模型支持新增**
- **Cosmos Predict2支持**：实现文本到图像和图像到视频生成工作流
- **增强的Flux兼容性**：Chroma Text Encoder能与常规Flux模型协作
- **LoRA训练集成**：新增原生LoRA训练节点

**性能和硬件优化**
- **AMD GPU增强**：在AMD GPU上启用FP8操作和PyTorch注意力机制
- **Apple Silicon修复**：解决了Apple设备上的FP16注意力问题
- **Flux模型稳定性**：解决了特定Flux模型生成黑色图像的问题

**采样改进**
- **Rectified Flow采样器**：新增支持RF的SEEDS和多步DPM++ SDE采样器
- **ModelSamplingContinuousEDM**：新增cosmos_rflow选项
- **内存优化**：改进了Cosmos模型的内存估算

**开发和集成功能**
- **SQLite数据库支持**：增强自定义节点的数据管理功能
- **PyProject.toml集成**：从pyproject文件自动注册web文件夹
- **前端灵活性**：支持语义化版本后缀和预发布前端版本
- **分词器增强**：通过tokenizer_data配置min_length设置

**使用体验改进**
- **Kontext宽高比修复**：解决了小组件限制
- **SaveLora一致性**：统一了所有保存节点的文件名格式
- **Python版本警告**：为过时的Python安装添加警报
- **WebcamCapture修复**：修正了IS_CHANGED签名

</Update>


<Update label="v0.3.40" description="2025年6月5日">

**工作流工具和性能优化**

本次更新带来了新的工作流工具和性能优化：

**新工作流工具**
- **ImageStitch节点**：在工作流中拼接多个图像
- **GetImageSize节点**：提取图像尺寸并支持批处理
- **Regex Replace节点**：高级文本处理功能

**模型兼容性**
- **张量处理改进**：简化的列表处理使多模型工作流更可靠
- **BFL API优化**：完善了对Kontext模型的支持
- **性能提升**：在色度处理中使用融合乘加运算

**开发体验**
- **自定义节点支持**：添加pyproject.toml支持
- **帮助菜单集成**：在节点库侧边栏中新增帮助系统
- **API文档**：增强API节点文档

**前端和UI**
- **前端更新至v1.21.7**：多项稳定性修复和性能改进
- **自定义API基础支持**：改进了自定义部署配置的子路径处理
- **安全加固**：修复XSS漏洞

**错误修复和稳定性**
- **Pillow兼容性**：更新了已弃用的API调用
- **ROCm支持**：改进了AMD GPU用户的版本检测
- **模板更新**：增强了自定义节点开发的项目模板

</Update>
