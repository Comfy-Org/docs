---
title: "更新日志"
description: "跟踪 ComfyUI 的最新功能、改进和错误修复。详细发布说明请查看 [Github releases](https://github.com/comfyanonymous/ComfyUI/releases) 页面。"
icon: "clock-rotate-left"
---

<Update label="v0.3.75" description="2025年11月26日">

**新模型支持**
- 添加 Z Image 模型支持，优化图像处理工作流性能

**错误修复**
- 修复 LoRA 在混合 FP8 精度模型下的功能问题
- 增强 Flux2 参考图像内存估算，减少显存错误

</Update>

<Update label="v0.3.73" description="2025年11月26日">

**错误修复**
- 修复可能中断工作流执行的关键系统崩溃问题
- 优化 Flux 2 文本编码器显存使用，提升性能

**模板更新**
- 更新工作流模板至 v0.7.20，提供更好的入门示例

</Update>

<Update label="v0.3.72" description="2025年11月25日">

**新模型支持**
- 新增 Flux 2 模型全面支持，包括 Flux 2 Pro API 节点
- 增强 HunyuanVideo 工作流，添加新变体和改进显示名称

**API 和安全改进**
- 改进 API 安全性，添加内容安全策略标头
- 修复公共 API 访问问题和 Gemini 模型支持

**视频处理**
- 添加视频处理方法：`get_frame_count` 和 `get_frame_rate`，实现更好的工作流控制

**性能优化**
- 优化文本编码器量化，支持硬件感知检测
- 增强量化支持，改善内存管理

**开发者工具**
- 为 Chroma、Qwen-Image 和 HunyuanVideo 模型添加 BlockInfo 支持

**前端和依赖项**
- 更新前端至 v1.30.6 并升级 Transformers 库

</Update>
<Update label="v0.3.71" description="2025年11月21日">

**模型兼容性与增强功能**
- **HunyuanVideo 1.5 支持**：添加了对最新版本 HunyuanVideo 模型的兼容性，扩展了视频生成能力
- **LLAMA 文本编码器改进**：在基于 LLAMA 的文本编码器模型中添加了禁用最终归一化的功能，以便更好地自定义工作流
- **HunyuanV3D 架构迁移**：将 Hunyuan3D 节点更新至 V3 架构，提升性能和兼容性

**API 节点扩展**
- **新增 Topaz API 节点**：在 ComfyUI 中直接添加了对 Topaz 视频增强工作流的支持
- **Nano Banana Pro 集成**：通过 Nano Banana Pro 扩展 API 节点集合，增强处理能力
- **Kling 唇形同步改进**：修复了 KlingLipSyncAudioToVideoNode 中的音频格式转换问题，确保正确处理 MP3 格式

**图像处理与工作流改进**
- **增强图像批处理**：修复了 ImageBatch 节点以处理不同通道数的图像，并在需要时自动添加 alpha 通道
- **预览节点优化**：将 PreviewAny 节点重命名为"Preview as Text"，使工作流组织更加清晰
- **工作流模板更新**：增强服务器模板处理程序，支持多包分发，改善工作流管理

**性能与系统优化**
- **CUDA 优化**：在较新的 CUDNN 版本中禁用不必要的解决方案，提升 GPU 性能
- 修复了工作流命名问题，提升了复杂处理管道的整体稳定性

</Update>
<Update label="v0.3.70" description="2025年11月19日">

**CUDA 12.6支持与分发**
- 添加了官方CUDA 12.6发布工作流程和便携式下载支持，增强GPU兼容性
- 更新了README文档，修正了便携式下载链接，简化安装流程

**模型兼容性与修复**
- **HunYuan 3D 2.0支持**：修复了兼容性问题，改进了3D模型生成工作流
- **EasyCache改进**：解决了输入/输出通道不匹配问题，该问题影响了某些模型配置
- 通过移除可能有害的原生自定义节点实现，增强了block swap功能

**API节点增强**
- **新增Gemini模型**：扩展了AI模型选项，支持文本和多模态生成工作流
- 改进了API节点开发基础设施，更新了PR模板并将Python最低版本要求提升至3.10

**开发与基础设施**
- 增强了pylint配置，提高自定义节点开发中的代码质量
- 改进了发布自动化和分发流程，确保更可靠的更新

</Update>
<Update label="v0.3.69" description="2025年11月18日">

**内存与性能优化**
- **默认启用锁页内存**，适用于NVIDIA和AMD GPU
- **减少VRAM使用量**，优化Flux、Qwen和LTX-Video模型
- 智能模型卸载，当VRAM使用增加时自动释放内存
- 改进卸载流上的权重转换性能

**新功能**
- **ScaleROPE节点现已支持Flux模型**
- 为分词器添加左填充支持
- 在 `/history` 和 `/queue` 端点中添加 `create_time` 字段
- Rodin3D节点迁移到新的API客户端架构

**Bug修复**
- 修复自定义节点导入错误（SingleStreamBlock/DoubleStreamBlock，临时修复）
- 修复Qwen ControlNet回归问题
- 增强量化操作，添加offload支持和稳定性改进
- 统一所有模型的RoPE函数实现

</Update>
<Update label="v0.3.68" description="2025年11月5日">
**模型支持**
- 支持 [ChronoEdit 14B](https://research.nvidia.com/labs/toronto-ai/chronoedit/) 模型

**性能与内存优化**
- 引入**混合精度量化系统**，优化模型加载
- 新增**RAM压力缓存模式**，在资源受限条件下智能管理内存
- 使用固定内存加速模型卸载，支持自动低RAM硬件检测
- 增强FP8操作：减少内存使用并修复torch.compile性能回归问题
- 改进异步卸载速度，解决竞争条件问题
- 修复Windows固定内存分配问题

**新节点与执行功能**
- **ScaleROPE节点**：支持WAN和Lumina模型的rope缩放
- 增强子图执行功能，允许在单个工作流中多次运行
- 改进缓存系统，正确处理字节数据和None输出

**API节点增强**
- 扩展LTXV API节点，支持12秒-20秒时长选项
- 修复DALL-E 2节点中的img2img操作
- 增强Rodin3D节点，返回正确的相对路径

**更新**
- 更新核心节点文档翻译（繁体中文，阿拉伯语，土耳其语）
- 工作流模板更新至v0.2.11

</Update>
<Update label="v0.3.67" description="2025年10月28日">

**API 节点**
- **LTXV API 集成**：添加了新的 LTXV API 节点，支持 Lightricks LTX 视频生成
- Network Client V2 升级，支持异步操作和取消功能
- 将 Tripo 和 Gemini API 节点转换为 V3 架构

**性能与兼容性**
- 通过仅在较新的 AMD GPU 上禁用 cudnn 来改进 AMD GPU 支持
- 修复了 API 节点中 Windows 特定的网络问题，改进重试处理

**核心改进**
- 增强了依赖感知缓存系统，修复了 --cache-none 在循环中的行为
- 添加了对多维 latents 的支持
- 添加了自定义节点发布子图端点

**其他更新**
- 前端升级到版本 1.28.8
- 模板更新到版本 0.2.4

</Update>
<Update label="v0.3.66" description="October 21, 2025">

**前端更新**
- **子图组件编辑**：可通过新的参数面板直接编辑子图组件，无需进入子图内部
- **模板弹窗重新设计**：重新设计模板浏览器，支持按模型标签和分类高级筛选

**性能优化**
- 提升工作流取消速度
- 修复在 PyTorch 2.9 及 NVIDIA 显卡下 VAE 内存占用高出 3 倍的问题  
- 加快色度辐射处理速度并修正批量大于 1 时的问题

**API 节点**
- 新增 Veo 3.1 模型支持
- 新增 TemporalScoreRescaling 节点，实现视频工作流高级时序控制

**硬件与兼容性**
- 禁用 AMD gfx942 GPU 的 FP8 运算
- 优化 --fast autotune 模式下的 CUDA 内存管理

**执行与架构**
- ControlNet 节点迁移至 V3 架构
- EasyCache 优化，支持正确的 batch_slice 处理
- merge_nested_dicts 功能改进，保证输入顺序正确
- 为未使用文件新增废弃提示
</Update>

<Update label="v0.3.65" description="2025年10月14日">

**节点架构迁移 (V3)**
- 将核心节点迁移到 V3 架构,包括模型缩放、LoRA 提取、合成、潜在操作、SD3/SLG、Flux、放大模型和 HunyuanVideo 节点

**音频和模型改进**
- 新增 MMaudio 16K VAE 支持高保真音频工作流
- 修复单声道音频错误保存为立体声问题
- 重构模型采样代码并修复 FP8 缩放 LoRA 问题
- 修复旧版 Stable Diffusion 检查点在新版 NumPy 上的加载问题

**AMD GPU 优化**
- 改进 SD/Flux VAE 操作的内存估算
- 在 ROCm 7.0+ 上启用 RDNA4 PyTorch 注意力

**API 节点更新**
- 新增价格提取器并改进 Kling/Pika API 节点
- 增强 Gemini Image API 的 aspect_ratio 支持

**其他更新**
- 模板 v0.1.95,节点文档 v0.3.0
- 修复 WAN2.2 缓存 VRAM 泄漏

</Update>

<Update label="v0.3.64" description="2025年10月8日">

**API 节点**
- 新增 Sora2 API 节点,支持 OpenAI 视频生成 API

</Update>

<Update label="v0.3.63" description="2025年10月6日">

**模型兼容性增强**
- **HunyuanVAE 支持**：新增对 HunyuanVAE 的支持，扩展了高级图像生成工作流的模型兼容性
- **Epsilon Scaling 节点**：新增 Epsilon Scaling 节点，通过缩放预测噪声来减少扩散模型的曝光偏差，提升生成质量（基于论文 [Elucidating the Exposure Bias in Diffusion Models](https://arxiv.org/abs/2308.15321)）

**内存和性能优化**
- **VAE 内存泄漏修复**：修复了 VAE OOM 异常处理中 Python 调用栈持有张量引用导致的 VRAM 泄漏，显著提升低显存设备上瓦片回退的可靠性
- **AMD 相关支持**：默认启用 TORCH_ROCM_AOTRITON_ENABLE_EXPERIMENTAL 

**API 节点更新**
- **Kling 2.5 Turbo**：在 txt2video 和 img2video 节点中新增对 kling-2-5-turbo 的支持，并修复了模式配置问题
- **API 节点修复**：改进了 Gemini 节点的 base64 处理，并修复了 Recraft API 节点函数中的缩进问题

**节点架构迁移（V3）**
- **大规模 V3 转换**：将众多节点类别迁移到 V3 架构，包括音频编码器、GITS、差分扩散、最优步数、PAG、LT、IP2P、形态学、torch compile、EPS、Pixverse、TomeSD、编辑模型、Rodin 和 Stable3D 节点，提高了工作流兼容性

**音频系统更新**
- **依赖清理**：移除了 soundfile 依赖并取消了 torchaudio 加载/保存操作，简化了音频处理管道

**开发者体验改进**
- **代码质量**：为 comfy_api_nodes 文件夹添加了 pylint 支持，并更新 example_node.py 使用 V3 架构，使自定义节点开发更加一致
- **文档更新**：为 Windows 用户增加了 AMD 安装说明，添加了 nightly PyTorch 命令

**前端更新**
- **子图发布工功能**： 允许将子图发布到节点库
- **选择工具箱重设计**：重新设计了节点选择工具箱

</Update>
<Update label="v0.3.62" description="2025年10月1日">
- **Rodin3D-Gen2 参数修复**
- **Seedance Pro 模型支持**
</Update>

<Update label="v0.3.61" description="2025年9月30日">

**API 节点**
- **Rodin3D Gen-2**：Rodin 最强大的图像转3D工具现已在 ComfyUI 中上线！
- **WAN 图生图**：Wan2.5 图生图 API 节点，支持图像编辑。

**增强音频功能**
- **新增音频节点**：为增强音频驱动的工作流和多模态内容创作添加了新的音频节点

**模型兼容性修复**
- **Qwen2.5VL 模板处理**：改进了当提示词中已包含模板时 Qwen2.5VL 模型的模板管理
- **HuMo 视图操作**：修复了 HuMo 模型中的 .view() 操作问题，提高视频生成的稳定性

**内存和性能优化**
- **内存泄漏修复**：通过显式分离模型终结器解决了内存泄漏问题，提高长时间运行工作流的稳定性
- **采样器 CFG 增强**：在采样器 CFG 函数参数中添加了 'input_cond' 和 'input_uncond' 参数，提供更灵活的条件控制

</Update>
<Update label="v0.3.60" description="2025年9月23日">

**新模型支持**
- **Wan2.2 Animate**：支持具有角色替换和动作迁移功能的 Wan2.2 Animate 视频生成模型
- **Qwen Image Edit 2509 支持**：支持更新的 Qwen Image Edit 2509，具有多图像编辑、更高一致性和原生 ControlNet 支持
- **HuMo 模型**：添加了对 1.7B 和 17B HuMo 模型的支持，使用音频驱动视频生成并保持唇形同步
- **Chroma Radiance**：一个在像素空间执行图像生成的模型，减少图像生成过程中的损失
- **Omnigen2 UMO LoRA**：添加了对 Omnigen2 UMO LoRA 模型的支持

**API 节点新增**
- **Kling v2.1 支持**：在 KlingStartEndFrame 节点中添加了 kling-v2-1 模型
- **Seedream4 修复**：修复了在部分成功时忽略错误的标志，使工作流更加稳健

**节点架构迁移（V3）**
- **核心节点更新**：将多个节点类别迁移到 V3 架构，包括 Minimax API、Cosmos、条件、CFG 和 Canny 节点

**性能和技术改进**
- **FP8 操作**：在 gfx1200 硬件上默认启用 FP8 操作，实现更快的处理速度
- **LoRA 训练器修复**：解决了 LoRA 训练工作流中 FP8 模型兼容性的错误

**前端更新**
- **前端版本更新**：更新到版本 1.26.13

</Update>
<Update label="v0.3.59" description="2025年9月10日">

**字节跳动 Seedream 4.0 集成**
- **新增 Seedream 节点**：添加了 ByteDanceSeedream (4.0) 节点。

</Update>

<Update label="v0.3.58" description="2025年9月6日">

**新模型支持**
- Hunyuan Image 2.1 常规模型
- Hunyuan 3D 2.1

**新增 API 节点**
- Stable Audio 2.5 API
- Seedance Video API
</Update>

<Update label="v0.3.57" description="2025年9月4日">

**ByteDance USO 模型支持**
- **UXO 主体身份 LoRA 支持**：这是一个基于 FLUX 架构的主体身份 LoRA 模型
- **相关工作流**：请在模板 `Flux` -> `Flux.1 Dev USO Reference Image Generation` 中查找工作流

**工作流实用工具**
- **ImageScaleToMaxDimension 节点**：用于智能图像缩放的新实用工具
- **SEEDS 噪声系统**：使用改进算法更新噪声分解
- **增强提示控制**：中断处理器现在接受 prompt_id 参数

**性能和架构**
- **V3 架构迁移**：将一些核心节点转换为 V3 架构
- **卷积自动调优**：启用自动卷积优化

**新增 API 集成**
- **ByteDance 图像节点**：添加了对 ByteDance 图像生成服务的支持
- **Ideogram 角色参考**：Ideogram v3 API 现在支持角色参考

</Update>

<Update label="v0.3.56" description="2025年8月30日">

**性能增强**
- **减少 Windows 上的 RAM 使用量**

</Update>
<Update label="v0.3.55" description="2025年8月29日">

**模型支持**
- Wan2.2 S2V
- Wan2.2 5B Fun control
- Wan2.2 5B Fun inpaint

**高级潜在空间处理**
- **LatentCut节点**：用于在精确点位切割潜在变量的新节点，在复杂生成工作流中实现对潜在空间操作的更精细控制。这对于批处理和时序视频工作流特别有用，比如删除视频中的某些帧。

</Update>

<Update label="v0.3.54" description="2025年8月28日">

**节点模型补丁改进**

此次专项更新改进了支撑 ComfyUI 灵活架构的核心节点模型补丁系统：

**核心基础设施增强**
- **节点模型补丁更新**：增强了 nodes_model_patch.py，改进了底层模型补丁机制，使得 ComfyUI 对 Qwen-Image ControlNet 的扩展更为容易

**工作流程优势**
- **增强的稳定性**：核心模型补丁改进有助于在不同工作流程配置中实现更可靠的节点执行和模型处理

</Update>

<Update label="v0.3.53" description="2025年8月28日">

**音频工作流集成与增强性能优化**

此版本增加了 ComfyUI 的音频处理能力，并包含性能改进和模型兼容性更新：

**音频处理更新**
- **Wav2vec2 音频编码器**：新增原生 wav2vec2 实现作为音频编码器模型，为多模态应用启用音频到嵌入工作流
- **音频编码器目录**：新增 models/audio_encoders 目录，此为 Wan2.2 S2V 音频编码器目录
- **AudioEncoderOutput V3 支持**：使 AudioEncoderOutput 与 V3 节点架构兼容，确保与现代工作流架构的无缝集成

**Google Gemini API 集成**
- **Gemini Image API 节点**： 新增全新 Google Gemini Image API 节点，即 “nano-Nano-banana” 图像编辑模型 API，具有高度的一致性

**视频生成性能与内存优化**
- **WAN 2.2 S2V 模型支持**：正在开发的 WAN 2.2 声音到视频模型实现，具有优化的内存使用和性能
- **增强的 S2V 性能**：对超过120帧的视频生成进行性能改进，改善扩展视频工作流
- **更好的内存估算**：改进 S2V 工作流的内存使用估算，防止长视频生成期间出现内存不足错误
- **负音频处理**：修复 S2V 工作流中负音频输入处理，使用适当的零值

**采样与节点增强**
- **DPM++ 2M SDE Heun (RES) 采样器**：@Balladie 提供的全新高级采样器，为精细调节生成控制提供额外的采样选项
- **LatentConcat 节点**：用于连接潜在张量的新节点，启用高级潜在空间操作工作流
- **EasyCache/LazyCache 稳定性**：修复当张量属性（形状/数据类型/设备）在采样期间发生变化时的关键崩溃问题，确保工作流可靠性

**模型兼容性改进**
- **ControlNet 类型模型**：增强与 Qwen Edit 和 Kontext 工作流配合使用的 ControlNet 类型模型的兼容性修复
- **Flux 内存优化**：调整 Flux 模型内存使用因子以获得更好的资源利用

**基础设施与可靠性**
- **模板更新**：更新至 0.1.66 和 0.1.68 版本
- **文档清理**：从自述文件中移除未完全实现的模型，以避免用户混淆

</Update>
<Update label="v0.3.52" description="2025年8月23日">

**增强模型支持和 Qwen Image ControlNet 集成等**

此版本显著扩展了 ControlNet 功能并改进了模型兼容性，让 ComfyUI 工作流更加多样化和可靠：

**Qwen ControlNet 生态系统**
- **Diffsynth ControlNet 支持**：新增支持 Qwen Diffsynth ControlNet 的 Canny 和深度条件控制，实现精确的边缘和基于深度的图像控制
- **InstantX Qwen ControlNet**：集成 InstantX Qwen ControlNet，扩展创意控制选项
- **修复补丁 ControlNet/模型**：通过专用的 Diffsynth 修复 ControlNet 支持增强修复功能

**节点架构和 API 演进**
- **V3 架构迁移**：字符串节点、Google Veo API 和 Ideogram API 节点升级到 V3 架构，提供更好的性能和一致性
- **增强的 API 节点**：OpenAI Chat 节点重命名为"OpenAI ChatGPT" 提高辨识度，Gemini Chat 节点现在包含复制按钮功能
- **改进的可用性**：API 节点现在通过更清晰的标签和增强的交互功能提供更好的用户体验

**工作流可靠性和性能**
- **LTXV 噪声遮罩修复**：解决了存在真实噪声遮罩时关键帧噪声遮罩维度问题，确保视频工作流执行稳定
- **3D 潜在条件控制**：修复了 3D 潜在空间的条件遮罩，在高级工作流中启用适当的深度感知条件控制
- **无效文件名处理**：通过正确处理无效文件名改进工作流保存功能，防止保存失败
- **EasyCache 和 LazyCache**：实现高级缓存系统以改进工作流执行性能

**平台和开发改进**
- **Python 3.13 支持**：完全兼容 Python 3.13，保持 ComfyUI 与最新 Python 发展同步
- **前端更新**：更新到 v1.25.10，改进导航和用户界面增强功能
- **逐元素融合**：通过逐元素操作融合添加性能优化
- **导航模式回滚**：回滚导航默认到传统旧版模式，避免默认启用新版标准导航模式导致用户体验问题，用户仍旧可以在设置中启用标准导航模式
</Update>

<Update label="v0.3.51" description="2025年08月20日">

**模型支持**
- **Qwen-Image-Edit模型**：原生支持 Qwen-Image-Edit
- **FluxKontextMultiReferenceLatentMethod 节点**：用于 Flux 工作流的多图参考输入节点
- **WAN 2.2 Fun Camera模型支持**：支持通过相机控制生成视频
- **模板更新**：升级到版本 0.1.62，新增了 Wan2.2 Fun Camera 和 Qwen Image Edit 等模板

**核心功能改进**
- **Context Windows上下文节点支持**：增强采样代码，支持更长序列的生成任务
- **SDPA 后端优化**：改进缩放点积注意力后端设置，提升性能

**多媒体节点支持**
- **音频录制节点**：新增原生音频录制节点，现在你可以直接在 ComfyUI内录制音频
- **音频视频集成**：完善音频-视频依赖项集成

**API节点支持更新**
- **GPT-5 系列模型**：支持最新的 GPT-5 模型
- **Kling V2-1 和 V2-1-Master**：更新视频生成模型功能
- **Minimax Hailuo 视频节点**：新增视频生成节点
- **Vidu 视频节点**：Vidu API 节点支持
- **Google 模型更新**：新增 Google Gemini 的新模型
- **OpenAI API 修复**：修复 OpenAI API 节点输入图像的 MIME 类型导致的错误

**性能优化**
- **Intel GPU 兼容性**：修复 Intel 集成 GPU 兼容性问题
- **PyTorch 兼容性**：增强与旧版 PyTorch 的兼容性
- **Torch Compile 优化**：改进 torch compile 行为
- **内存管理**：优化安装大小和内存效率

**前端变更**
- **子图支持**：子图功能支持
- **快捷键面板**： 新增底部快捷键面板
- **修改 UI 布局**：修改终端入口布局，增加模板，日志面板等多个入口
- **新增标准画布模式**： 新增标注画布模式，可在 lite-graph(画面) Canvas > 画布导航模式中切换
- **新增小地图**： 新增工作流迷你地图
- **新增Tab预览**： 新增工作流 tab 预览
- **调整顶部 Tab 菜单布局**

</Update>

<Update label="v0.3.50" description="2025年8月13日">

**模型集成与性能提升**

本次更新扩展了ComfyUI的模型支持，优化了API功能，并提升了工作流程的稳定性：

**Qwen模型生态**
- **Qwen图像模型支持**：改进了LoRA加载和模型合并功能，支持更复杂的视觉工作流程
- **Qwen模型合并节点**：新增节点，支持合并Qwen图像模型
- **SimpleTuner Lycoris LoRA支持**：扩展了对Qwen-Image模型的Lycoris LoRA兼容性

**API与性能**
- **异步API节点**：引入异步API节点，支持非阻塞工作流程执行
- **内存处理优化**：RepeatLatentBatch节点改进，能正确处理多维latent
- **WAN 2.2 Fun Control支持**：新增对WAN 2.2 fun control功能的支持

**硬件优化**
- **AMD GPU改进**：提升了AMD Radeon的FP16精度处理和性能
- **RDNA3架构修复**：解决了gfx1201 GPU使用Flux模型的问题
- **PyTorch支持更新**：升级了CUDA和ROCM PyTorch版本

**开发体验**
- **日志记录优化**：功能标志仅在详细模式下显示
- **音频处理安全**：增强了torchaudio导入安全检查
- **Kling API改进**：修复了Kling Image API节点的图像类型参数

</Update>
<Update label="v0.3.49" description="2025年8月5日">

**界面优化与模型支持**

此版本改进了用户体验，增加了前沿模型支持：

**用户界面**
- **最近项目 API**：新增跟踪最近使用项目的API
- **工作流导航优化**：改进了常用元素的组织

**模型集成**
- **Qwen视觉模型支持**：初步支持Qwen图像模型
- **图像处理优化**：增强了Qwen模型集成

**视频生成**
- **Veo3视频生成**：新增Veo3视频生成节点，支持音频
- **音视频合成**：在单个节点中结合视频和音频生成

**性能与稳定**
- **内存管理优化**：优化了条件VRAM使用
- **设备一致性**：修复了条件数据和上下文的设备问题
- **ControlNet稳定性**：解决了ControlNet兼容性问题

**开发与系统**
- **错误处理**：添加了条件设备不匹配的警告
- **模板更新**：更新了多个模板版本

</Update>
<Update label="v0.3.48" description="2025年8月2日">

**API增强与性能优化**

此版本引入了后端改进和性能优化：

**ComfyAPI框架**
- **ComfyAPI Core v0.0.2**：核心API框架更新，提升了稳定性和可扩展性
- **部分执行支持**：新增后端支持部分工作流执行

**视频处理**
- **WAN Camera内存优化**：改进了基于WAN的相机工作流内存管理
- **WanFirstLastFrameToVideo修复**：解决了视频生成的关键问题

**性能与模型**
- **VAE优化**：在VAE操作中优化了torch.silu
- **WAN VAE优化**：对WAN VAE操作进行了优化

**节点架构**
- **V3节点架构**：实现了下一代节点架构系统
- **模板更新**：更新了多个模板版本

</Update>
<Update label="v0.3.47" description="2025年7月30日">

**内存优化与大模型性能**

本次更新优化了大模型工作流的内存使用：

**WAN 2.2模型**
- **内存占用减少**：减少了WAN 2.2 VAE操作的内存使用
- **5B I2V模型支持**：优化了WAN 2.2 5B图像到视频模型

**VRAM管理**
- **Windows大显卡支持**：为Windows高端显卡增加了VRAM分配
- **内存分配改进**：改进了多大模型用户的内存管理

</Update>
<Update label="v0.3.46" description="2025年7月28日">

**硬件加速和音频处理**

此版本扩展了硬件支持并增强了音频处理：

**音频处理**
- **PyAV音频后端**：用PyAV替换torchaudio.load
- **音频集成优化**：增强了多媒体生成工作流的音频处理

**硬件支持**
- **Iluvatar CoreX支持**：添加了对Iluvatar CoreX加速器的支持
- **Intel XPU优化**：改进了XPU支持
- **AMD ROCm增强**：在Torch 2.8上为gfx1201启用了PyTorch attention
- **CUDA内存管理**：修复了CUDA malloc激活问题

**采样算法**
- **Euler CFG++增强**：分离了去噪和噪声估计过程
- **WAN模型支持**：添加了对WAN模型的全面支持

**训练功能**
- **训练节点增强**：添加了算法支持、梯度累积和可选梯度检查点
- **训练灵活性**：提供了更好的内存管理和性能优化

**节点和工作流**
- **Moonvalley V2V节点**：添加了Moonvalley Marey V2V节点
- **负面提示词更新**：改进了Moonvalley节点的负面提示词处理
- **历史API增强**：向get_history API添加了map_function参数

**API和系统**
- **前端版本跟踪**：在/system_stats API响应中添加了required_frontend_version
- **设备信息**：增强了XPU设备名称打印
- **模板更新**：更新了多个模板版本

**开发体验**
- **文档更新**：增强了README和模型集成指南
- **行结束符修复**：标准化了工作流中的行结束符
- **代码清理**：移除了已弃用的代码

</Update>
<Update label="v0.3.45" description="2025年7月21日">

**采样与训练功能改进**

本版本增强了采样算法和训练功能：

**采样和生成功能**
- **SA-Solver采样器**：新的重构SA-Solver采样算法
- **实验性CFGNorm节点**：无分类器引导标准化节点
- **嵌套双CFG支持**：为DualCFGGuider节点添加嵌套风格配置
- **SamplingPercentToSigma节点**：用于计算sigma的新实用节点

**训练功能**
- **多数据集支持**：LoRA训练节点支持多个图像-描述数据集
- **训练循环优化**：优化了训练算法
- **错误检测增强**：为LoRA操作添加了模型检测错误提示

**平台和性能**
- **异步节点支持**：完全支持异步节点函数
- **Chroma灵活性**：取消了Chroma中硬编码的patch_size参数
- **LTXV VAE解码器**：切换到改进的默认填充模式
- **Safetensors内存管理**：为mmap问题添加了解决方案

**API和集成**
- **自定义提示ID**：API允许指定提示ID
- **Kling API优化**：增加了轮询超时时间
- **历史令牌清理**：从历史项目中删除了敏感令牌
- **Python 3.9兼容性**：修复了兼容性问题

**错误修复和稳定性**
- **MaskComposite修复**：解决了目标蒙版的错误
- **Fresca输入/输出**：修正了Fresca模型工作流程的处理
- **引用错误修复**：解决了Gemini节点实现中的引用问题
- **行结束标准化**：自动检测和删除Windows行结束符

**开发体验**
- **警告系统**：添加了torch导入错误警告
- **模板更新**：更新了多个模板版本
- **文档**：增强了fast_fp16_accumulation的文档

</Update>
<Update label="v0.3.44" description="2025年7月8日">

**采样和模型控制增强**

此版本改进了采样算法和模型控制系统：

**新采样功能**
- **TCFG节点**：增强的分类器无关引导控制
- **ER-SDE采样器**：从VE迁移到VP算法
- **跳层引导（SLG）**：用于推理期间精确层级控制

**开发工具**
- **自定义节点管理**：新的`--whitelist-custom-nodes`参数
- **性能优化**：双CFG节点在CFG为1.0时自动优化
- **GitHub Actions集成**：自动化发布webhook通知

**图像处理**
- **新变换节点**：添加了ImageRotate和ImageFlip节点
- **ImageColorToMask修复**：修正了掩码值返回
- **3D模型支持**：上传3D模型到自定义子文件夹

**引导和条件**
- **PerpNeg引导器**：更新了前后CFG处理
- **潜在条件修复**：解决了多步骤工作流中的条件问题
- **去噪步骤**：为多个采样器添加去噪步骤支持

**平台稳定性**
- **PyTorch兼容性**：修复了PyTorch nightly构建的问题
- **FP8回退**：当FP8操作遇到异常时自动回退
- **音频处理**：移除了已弃用的torchaudio.save函数依赖

**模型集成**
- **Moonvalley节点**：为Moonvalley模型工作流添加原生支持
- **调度器重新排序**：简单调度器现在默认优先
- **模板更新**：更新了多个模板版本

**安全性**
- **安全加载**：在不安全加载文件时添加警告
- **文件验证**：增强检查点加载安全措施

</Update>
<Update label="v0.3.43" description="2025年6月30日">

**模型支持与工作流可靠性**

本次更新改进了模型兼容性和工作流稳定性：

**扩展模型文档**：为Flux Kontext和Omnigen 2模型添加了支持文档
**VAE编码改进**：移除了VAE编码过程中不必要的随机噪声注入
**内存管理修复**：解决了影响Kontext模型使用的关键内存估算错误

</Update>

<Update label="v0.3.41" description="2025年6月17日">

**模型支持新增**
- **Cosmos Predict2支持**：实现文本到图像和图像到视频生成工作流
- **增强的Flux兼容性**：Chroma Text Encoder能与常规Flux模型协作
- **LoRA训练集成**：新增原生LoRA训练节点

**性能和硬件优化**
- **AMD GPU增强**：在AMD GPU上启用FP8操作和PyTorch注意力机制
- **Apple Silicon修复**：解决了Apple设备上的FP16注意力问题
- **Flux模型稳定性**：解决了特定Flux模型生成黑色图像的问题

**采样改进**
- **Rectified Flow采样器**：新增支持RF的SEEDS和多步DPM++ SDE采样器
- **ModelSamplingContinuousEDM**：新增cosmos_rflow选项
- **内存优化**：改进了Cosmos模型的内存估算

**开发和集成功能**
- **SQLite数据库支持**：增强自定义节点的数据管理功能
- **PyProject.toml集成**：从pyproject文件自动注册web文件夹
- **前端灵活性**：支持语义化版本后缀和预发布前端版本
- **分词器增强**：通过tokenizer_data配置min_length设置

**使用体验改进**
- **Kontext宽高比修复**：解决了小组件限制
- **SaveLora一致性**：统一了所有保存节点的文件名格式
- **Python版本警告**：为过时的Python安装添加警报
- **WebcamCapture修复**：修正了IS_CHANGED签名

</Update>


<Update label="v0.3.40" description="2025年6月5日">

**工作流工具和性能优化**

本次更新带来了新的工作流工具和性能优化：

**新工作流工具**
- **ImageStitch节点**：在工作流中拼接多个图像
- **GetImageSize节点**：提取图像尺寸并支持批处理
- **Regex Replace节点**：高级文本处理功能

**模型兼容性**
- **张量处理改进**：简化的列表处理使多模型工作流更可靠
- **BFL API优化**：完善了对Kontext模型的支持
- **性能提升**：在色度处理中使用融合乘加运算

**开发体验**
- **自定义节点支持**：添加pyproject.toml支持
- **帮助菜单集成**：在节点库侧边栏中新增帮助系统
- **API文档**：增强API节点文档

**前端和UI**
- **前端更新至v1.21.7**：多项稳定性修复和性能改进
- **自定义API基础支持**：改进了自定义部署配置的子路径处理
- **安全加固**：修复XSS漏洞

**错误修复和稳定性**
- **Pillow兼容性**：更新了已弃用的API调用
- **ROCm支持**：改进了AMD GPU用户的版本检测
- **模板更新**：增强了自定义节点开发的项目模板

</Update>
