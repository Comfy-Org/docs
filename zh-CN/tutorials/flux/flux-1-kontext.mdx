---
title: "ComfyUI Flux Kontext åŸç”Ÿå·¥ä½œæµç¤ºä¾‹"
description: "æœ¬æ–‡å°†ç®€è¦ä»‹ç» Flux Kontext åŸç”Ÿå·¥ä½œæµç¤ºä¾‹ã€‚"
sidebarTitle: "Flux Kontext"
---

import PromptTechniques from "/snippets/zh/tutorials/flux/prompt-techniques.mdx";

## å…³äº FLUX.1 Kontext

FLUX.1 Kontext æ˜¯ Black Forest Labs æ¨å‡ºçš„çªç ´æ€§å¤šæ¨¡æ€å›¾åƒç¼–è¾‘æ¨¡å‹ï¼Œæ ‡å¿—ç€ä»ä¼ ç»Ÿ"çº¯æ–‡æœ¬åˆ°å›¾åƒ"å‘"ä¸Šä¸‹æ–‡æ„ŸçŸ¥å›¾åƒç”Ÿæˆ"çš„é‡å¤§æŠ€æœ¯è·ƒè¿›ã€‚ä¸ç°æœ‰æ¨¡å‹ä¸åŒï¼ŒFLUX.1 Kontext æ”¯æŒæ–‡æœ¬å’Œå›¾åƒåŒæ—¶è¾“å…¥ï¼Œèƒ½å¤Ÿæ™ºèƒ½ç†è§£å›¾åƒä¸Šä¸‹æ–‡å¹¶æ‰§è¡Œç²¾ç¡®ç¼–è¾‘æ“ä½œã€‚
FLUX.1 Kontext çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶å‡ºè‰²çš„ä¸Šä¸‹æ–‡ç†è§£èƒ½åŠ›å’Œè§’è‰²ä¸€è‡´æ€§ä¿æŒï¼Œå³ä½¿ç»è¿‡å¤šæ¬¡è¿­ä»£ç¼–è¾‘ï¼Œä¹Ÿèƒ½ç¡®ä¿äººç‰©ç‰¹å¾ã€æ„å›¾å¸ƒå±€ç­‰å…³é”®å…ƒç´ ä¿æŒç¨³å®šã€‚

### ç‰ˆæœ¬è¯´æ˜

- **[FLUX.1 Kontext [pro]** - å•†ä¸šç‰ˆæœ¬ï¼Œä¸“æ³¨å¿«é€Ÿè¿­ä»£ç¼–è¾‘
- **FLUX.1 Kontext [max]** - å®éªŒç‰ˆæœ¬ï¼Œæ›´å¼ºçš„æç¤ºéµå¾ªèƒ½åŠ›  
- **FLUX.1 Kontext [dev]** - å¼€æºç‰ˆæœ¬ï¼ˆæœ¬æ•™ç¨‹ä½¿ç”¨ï¼‰ï¼Œ12Bå‚æ•°ï¼Œä¸»è¦ç”¨äºç ”ç©¶

ç›®å‰åœ¨ ComfyUI ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨æ‰€æœ‰çš„è¿™äº›ç‰ˆæœ¬ï¼Œå…¶ä¸­ [Pro åŠ Max ç‰ˆæœ¬](zh-CN/tutorials/api-nodes/black-forest-labs/flux-1-kontext) å¯ä»¥é€šè¿‡ API èŠ‚ç‚¹æ¥è¿›è¡Œè°ƒç”¨ï¼Œè€Œ Dev ç‰ˆæœ¬å¼€æºç‰ˆæœ¬è¯·å‚è€ƒæœ¬ç¯‡æŒ‡å—ä¸­çš„è¯´æ˜ã€‚

### æ ¸å¿ƒèƒ½åŠ›

- **è§’è‰²ä¸€è‡´æ€§**ï¼šå¤šæ¬¡ç¼–è¾‘åä¿æŒäººç‰©ç‰¹å¾ç¨³å®š
- **å±€éƒ¨ç¼–è¾‘**ï¼šç²¾ç¡®ä¿®æ”¹å›¾åƒç‰¹å®šåŒºåŸŸ
- **è¿­ä»£ç¼–è¾‘**ï¼šæ”¯æŒé€æ­¥ä¼˜åŒ–å’Œå¤šè½®ä¿®æ”¹
- **é«˜é€Ÿæ¨ç†**ï¼šç›¸æ¯”åŒç±»æ¨¡å‹é€Ÿåº¦æå‡æœ€é«˜8å€

## ComfyUI Flux Kontext åŸç”Ÿå·¥ä½œæµ

### 1. å·¥ä½œæµåŠè¾“å…¥å›¾ç‰‡ä¸‹è½½

ä¸‹é¢çš„å›¾ç‰‡çš„`metadata`ä¸­å·²ç»åŒ…å«å·¥ä½œæµåŠæ¨¡å‹ä¸‹è½½ä¿¡æ¯ï¼Œè¯·ä¸‹è½½å¹¶æ‹–å…¥ ComfyUI ä¸­åŠ è½½å¯¹åº”å·¥ä½œæµ

![ComfyUI Flux Kontext åŸç”Ÿå·¥ä½œæµ](https://raw.githubusercontent.com/Comfy-Org/example_workflows/main/flux/kontext/flux1_kontext.png)
è¯·ä¸‹è½½ä¸‹é¢çš„å›¾ç‰‡ä½œä¸ºè¾“å…¥

![ComfyUI Flux Kontext åŸç”Ÿå·¥ä½œæµè¾“å…¥](https://raw.githubusercontent.com/Comfy-Org/example_workflows/main/flux/kontext/input.png)

### 2. æ‰‹åŠ¨æ¨¡å‹ä¸‹è½½

å¦‚æœä½ æ— æ³•é¡ºåˆ©å®Œæˆæ¨¡å‹ä¸‹è½½ï¼Œè¯·æ‰‹åŠ¨ä¸‹è½½ä¸‹é¢çš„æ–‡ä»¶

**Diffusion Model**

ã€è¡¥å……é“¾æ¥ã€‘

<Tip>
ä¸‹é¢çš„è¿™äº›æ¨¡å‹ä½ å¯èƒ½å·²ç»æœ‰äº†
</Tip>

**VAE**
- [ae.safetensors](https://huggingface.co/Comfy-Org/Lumina_Image_2.0_Repackaged/blob/main/split_files/vae/ae.safetensors)

**Text Encoder**
- [clip_l.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/blob/main/clip_l.safetensors)
- [t5xxl_fp16.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/t5xxl_fp16.safetensors) or [t5xxl_fp8_e4m3fn_scaled.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/t5xxl_fp8_e4m3fn_scaled.safetensors)

æ¨¡å‹ä¿å­˜ä½ç½®

```
ğŸ“‚ ComfyUI/
â”œâ”€â”€ ğŸ“‚ models/
â”‚   â”œâ”€â”€ ğŸ“‚ diffusion_models/
â”‚   â”‚   â””â”€â”€ [to be updated]
â”‚   â”œâ”€â”€ ğŸ“‚ vae/
â”‚   â”‚   â””â”€â”€ ae.safetensor
â”‚   â””â”€â”€ ğŸ“‚ text_encoders/
â”‚       â”œâ”€â”€ clip_l.safetensors
â”‚       â””â”€â”€ t5xxl_fp16.safetensors æˆ–è€… t5xxl_fp8_e4m3fn_scaled.safetensors
```

### 3. æŒ‰æ­¥éª¤å®Œæˆå·¥ä½œæµçš„è¿è¡Œ

![ComfyUI Flux Kontext åŸç”Ÿå·¥ä½œæµæ­¥éª¤](/images/tutorial/flux/flux_1_kontext_step_guide.jpg)

ä½ å¯å‚è€ƒå›¾ç‰‡ä¸­çš„åºå·æ¥å®Œæˆå›¾å·¥ä½œæµçš„è¿è¡Œï¼š

<Note>
    ç›®å‰æˆ‘ä»¬åœ¨å®é™…æµ‹è¯•ä¸­ï¼Œä½¿ç”¨åŸå§‹ç‰ˆæœ¬æ¨¡å‹æ—¶ï¼Œåœ¨ 24GB æ˜¾å­˜çš„ 4090 æ˜¾å¡å¤„ç† 1024x1024 åˆ†è¾¨ç‡ä¸Šä¼šå‡ºç°æ˜¾å­˜ä¸è¶³çš„æƒ…å†µï¼Œåœ¨ 40GB æ˜¾å­˜çš„ A100 å¯ä»¥é¡ºåˆ©è¿è¡Œ 1024x1024 çš„å›¾ç‰‡ã€‚
    åœ¨æ­¤å·¥ä½œæµä¸­æˆ‘ä»¬é»˜è®¤ä½¿ç”¨äº† `fp8_e4m3fn` ç²¾åº¦è®¾ç½®æ¥ç¡®ä¿åœ¨æ™®é€šæ¶ˆè´¹çº§æ˜¾å¡ä¸Šä¹Ÿå¯ä»¥è¿è¡Œï¼Œå¦‚æœä½ éœ€è¦å°è¯•åŸå§‹ç²¾åº¦è¯·ä¿®æ”¹ä¸º`default`
</Note>

1. åœ¨ `Load Diffusion Model` èŠ‚ç‚¹ä¸­åŠ è½½ `flux_1_kontext_pro_image.safetensors` æ¨¡å‹ï¼Œæ³¨æ„è¿™é‡Œçš„ `weight_dtype` å·²ç»è¢«è®¾ç½®ä¸º `fp8_e4m3fn` æ¥ç¡®ä¿ä½ åœ¨æ™®é€šæ¶ˆè´¹çº§æ˜¾å¡ä¸Šä¹Ÿå¯ä»¥è¿è¡Œï¼Œå¦‚æœä½ éœ€è¦åŸå§‹ç²¾åº¦è¯·ä¿®æ”¹ä¸º`default`
2. åœ¨ `DualCLIP Load` èŠ‚ç‚¹ä¸­ç¡®ä¿ï¼š `clip_l.safetensors` åŠ `t5xxl_fp16.safetensors` æˆ–è€… `t5xxl_fp8_e4m3fn_scaled.safetensors` å·²ç»åŠ è½½
3. åœ¨ `Load VAE` èŠ‚ç‚¹ä¸­ç¡®ä¿åŠ è½½ `ae.safetensors` æ¨¡å‹
4. åœ¨ `Image size` ä¸­è®¾ç½®å°ºå¯¸
5. åœ¨ `Load Image` èŠ‚ç‚¹ä¸­åŠ è½½éœ€è¦ç¼–è¾‘çš„å›¾åƒ
6. åœ¨ `CLIP Text Encode` èŠ‚ç‚¹ä¸­ä¿®æ”¹æç¤ºè¯ï¼Œç›®å‰ä»…æ”¯æŒè‹±æ–‡

<PromptTechniques/>