---
title: "ComfyUI Flux 文生图工作示例"
description: "本文将简要介绍 Flux 绘图模型，并指导使用 Flux 模型进行文生图的示例包括原始完整版本和 FP8 Checkpoint 版本。"
sidebarTitle: "Flux文生图"
---

![Flux](/images/tutorial/flux/flux_example.png)
Flux是目前最大的开源AI绘画模型之一，拥有 12B 参数，原始文件大小约为23GB。它由 [Black Forest Labs](https://blackforestlabs.ai/) 开发，该团队由前Stable Diffusion团队成员创立。
Flux模型以其卓越的画面质量和灵活性而闻名，能够生成高质量、多样化的图像。

目前 Flux.1  模型主要有以下几种版本：
- Flux Pro：效果最佳模型，闭源模型，仅支持通过 API 调用。
- Flux.1 [dev]：开源但仅限非商业使用，从 Pro 版本蒸馏而来，效果接近Pro版。
- Flux.1 [schnell]：采用 Apache2.0 许可，仅需4步即可生成图像，适合低配置硬件。

**Flux 模型特点**
- 混合架构：结合了 Transformer 网络和扩散模型的优势，有效整合文本与图像信息，提升生成图像与提示词的对齐精度，对复杂的提示词依旧有非常好的还原能力。
- 参数规模：Flux 拥有 12B 参数，可捕捉更复杂的模式关系，生成更逼真、多样化的图像，是目前最大的开源文生图图像模型之一。
- 支持多种风格：包括现实主义、动漫、幻想和插画等风格。

在本篇示例中，我们将介绍使用 Flux 原始完整版模型和 FP8 Checkpoint 版本的的模型使用 Flux.1 Dev 和 Flux.1 Schnell 版本的模型进行文生图的示例。

- Flux 完整版本：效果最佳，但需要较大的显存资源，需要安装多个模型文件。
- Flux FP8 Checkpoint： 仅需一个 fp8 版本的模型，但是质量相对完整版会有所降低。

<Tip>
本篇示例中的所有工作流图片的 Metadata 中已包含对应模型下载信息，使用以下方式来加载工作流：
- 直接拖入 ComfyUI 
- 或使用菜单 `Workflows` -> `Open（ctrl+o）`

如果自动下载无法完成或者你使用的不是 Desktop 版本，请参考对应部分的手动安装部分来完成模型的安装。
请在开始之前确保你的 ComfyUI 已更新到最新版本。
</Tip>

## Flux.1 原始版本模型文生图示例

<Note>
请注意如果你无法下载[black-forest-labs/FLUX.1-dev](https://huggingface.co/black-forest-labs/FLUX.1-dev)中的模型，请确保你已登录 Huggingface 并同意了对应 Repo 的协议。
![Flux Agreement](/images/tutorial/flux/flux_agreement.jpg)
</Note>

### Flux.1 Dev 完整版本工作流

#### 1. 工作流文件

请下载下面的图片，并拖入 ComfyUI 中加载工作流。
![Flux Dev 原始版本工作流](https://raw.githubusercontent.com/Comfy-Org/example_workflows/main/flux/text-to-image/flux_dev_t5fp16.png)

<Note>
在工作流文件中 `flux1-dev.safetensors` 可能无法自动完成下载，请参考手动安装部分完成模型的安装。
</Note>

### 2. 手动安装模型

请完成下面的模型文件：
- [clip_l.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/clip_l.safetensors?download=true)
- [t5xxl_fp16.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/t5xxl_fp16.safetensors?download=true) 当你的显存大于 32GB 时推荐使用。
- [ae.safetensors](https://huggingface.co/black-forest-labs/FLUX.1-schnell/resolve/main/ae.safetensors?download=true)
- [flux1-dev.safetensors](https://huggingface.co/black-forest-labs/FLUX.1-dev/resolve/main/flux1-dev.safetensors) 

<Note>
- `flux1-dev.safetensors` 文件需要同意 [black-forest-labs/FLUX.1-dev](https://huggingface.co/black-forest-labs/FLUX.1-dev) 的协议后才能使用浏览器进行下载。
- 如果你的显存较低，可以尝试使用 [t5xxl_fp8_e4m3fn.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/t5xxl_fp8_e4m3fn.safetensors?download=true) 来替换 `t5xxl_fp16.safetensors` 文件。
</Note>

文件保存位置：
```
ComfyUI/
├── models/
│   ├── text_encoders/
│   │   ├── clip_l.safetensors
│   │   └── t5xxl_fp16.safetensors
│   ├── vae/
│   │   └── ae.safetensors
│   └── diffusion_models/
│       └── flux1-dev.safetensors
```

### 3. 按步骤完成工作流的运行

请参照下面的图片，确保各个模型文件都已经加载完成

![ComfyUI Flux Dev工作流](/images/tutorial/flux/flow_diagram_flux_dev_t5fp16.jpg)

1. 确保在`DualCLIPLoader`中下面的模型已加载：
   - clip_name1: t5xxl_fp16.safetensors
   - clip_name2: clip_l.safetensors
2. 确保在`Load Diffusion Model`加载了`flux1-dev.safetensors`
3. 确保在`Load VAE`中加载了`ae.safetensors`
4. 点击 `Queue` 按钮，或者使用快捷键 `Ctrl(cmd) + Enter(回车)` 来运行工作流

### Flux.1 Schnell 完整版本工作流

请下载下面的图片，并拖入 ComfyUI 中加载工作流。

![Flux Schnell 版本工作流](https://raw.githubusercontent.com/Comfy-Org/example_workflows/main/flux/text-to-image/flux_schnell_t5fp8.png)

### 2. 手动安装模型

<Note>
在这个工作流中，只有两个模型文件与 Flux1 Dev 版本的工作流不同,对于 T5xxl 你仍可使用 fp16 版本来获得更好的效果。
- **t5xxl_fp16.safetensors** -> **t5xxl_fp8.safetensors**
- **flux1-dev.safetensors** -> **flux1-schnell.safetensors**
</Note>


请完成下面的模型文件：
- [clip_l.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/clip_l.safetensors?download=true)
- [t5xxl_fp8.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/t5xxl_fp16.safetensors?download=true)
- [ae.safetensors](https://huggingface.co/black-forest-labs/FLUX.1-schnell/resolve/main/ae.safetensors?download=true)
- [flux1-schnell.safetensors](https://huggingface.co/black-forest-labs/FLUX.1-schnell/resolve/main/flux1-schnell.safetensors) 


```
ComfyUI/
├── models/
│   ├── text_encoders/
│   │   ├── clip_l.safetensors
│   │   └── t5xxl_fp8.safetensors
│   ├── vae/
│   │   └── ae.safetensors
│   └── diffusion_models/
│       └── flux1-schnell.safetensors
```

### 3. 按步骤完成工作流的运行

![Flux Schnell 版本工作流](/images/tutorial/flux/flow_diagram_flux_schnell_t5fp8.jpg)

1. 确保在`DualCLIPLoader`中下面的模型已加载：
   - clip_name1: t5xxl_fp16.safetensors
   - clip_name2: clip_l.safetensors
2. 确保在`Load Diffusion Model`加载了`flux1-dev.safetensors`
3. 确保在`Load VAE`中加载了`ae.safetensors`
4. 点击 `Queue` 按钮，或者使用快捷键 `Ctrl(cmd) + Enter(回车)` 来运行工作流

## Flux.1 fp8 Checkpoint 版本模型文生图示例

fp8 版本是对 flux1 原版 fp16 版本的量化版本，在一定程度上这个版本的质量会低于 fp16 版本，但同时它需要的显存也会更少，使用这个版本你仅需要安装一个模型文件既可运行。

### Flux.1 Dev fp8 Checkpoint 版本工作流

请下载下面的图片，并拖入 ComfyUI 中加载工作流。

![Flux Dev fp8 Checkpoint 版本工作流](https://raw.githubusercontent.com/Comfy-Org/example_workflows/main/flux/text-to-image/flux_dev_fp8.png)

对应模型请下载[flux1-dev-fp8.safetensors](https://huggingface.co/Comfy-Org/flux1-dev/resolve/main/flux1-dev-fp8.safetensors?download=true)保存至 `ComfyUI/models/Checkpoint/` 目录下。

确保对应的 `Load Checkpoint` 加载了 `flux1-dev-fp8.safetensors`，即可测试运行。

### Flux.1 Schnell fp8 Checkpoint 版本工作流

请下载下面的图片，并拖入 ComfyUI 中加载工作流。

![Flux Schnell fp8 Checkpoint 版本工作流](https://raw.githubusercontent.com/Comfy-Org/example_workflows/main/flux/text-to-image/flux_schnell_fp8.png)

对应模型请下载[flux1-schnell-fp8.safetensors](https://huggingface.co/Comfy-Org/flux1-schnell/resolve/main/flux1-schnell-fp8.safetensors?download=true)保存至 `ComfyUI/models/Checkpoint/` 目录下。

确保对应的 `Load Checkpoint` 加载了 `flux1-schnell-fp8.safetensors`，即可测试运行。