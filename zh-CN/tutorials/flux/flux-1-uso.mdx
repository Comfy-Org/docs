---
title: "å­—èŠ‚è·³åŠ¨ USO ComfyUI åŸç”Ÿå·¥ä½œæµç¤ºä¾‹"
description: "ä½¿ç”¨å­—èŠ‚è·³åŠ¨ USO æ¨¡å‹å®ç°ç»Ÿä¸€é£æ ¼å’Œä¸»ä½“é©±åŠ¨ç”Ÿæˆ"
sidebarTitle: "å­—èŠ‚è·³åŠ¨ USO"
---

import UpdateReminder from '/snippets/zh/tutorials/update-reminder.mdx'

**USO (Unified Style-Subject Optimized)** æ˜¯å­—èŠ‚è·³åŠ¨ UXO å›¢é˜Ÿå¼€å‘çš„æ¨¡å‹ï¼Œç»Ÿä¸€äº†é£æ ¼é©±åŠ¨å’Œä¸»ä½“é©±åŠ¨ç”Ÿæˆä»»åŠ¡ã€‚
åŸºäº FLUX.1-dev æ¶æ„æ„å»ºï¼Œè¯¥æ¨¡å‹é€šè¿‡è§£è€¦å­¦ä¹ å’Œé£æ ¼å¥–åŠ±å­¦ä¹  (SRL) å®ç°äº†é£æ ¼ç›¸ä¼¼æ€§å’Œä¸»ä½“ä¸€è‡´æ€§ã€‚

USO æ”¯æŒä¸‰ç§ä¸»è¦æ–¹æ³•ï¼š

- **ä¸»ä½“é©±åŠ¨**ï¼šå°†ä¸»ä½“æ”¾ç½®åˆ°æ–°åœºæ™¯ä¸­ï¼ŒåŒæ—¶ä¿æŒèº«ä»½ä¸€è‡´æ€§
- **é£æ ¼é©±åŠ¨**ï¼šåŸºäºå‚è€ƒå›¾åƒå°†è‰ºæœ¯é£æ ¼åº”ç”¨äºæ–°å†…å®¹
- **ç»„åˆæ¨¡å¼**ï¼šåŒæ—¶ä½¿ç”¨ä¸»ä½“å’Œé£æ ¼å‚è€ƒ

**ç›¸å…³é“¾æ¥**
- [é¡¹ç›®ä¸»é¡µ](https://bytedance.github.io/USO/)
- [GitHub](https://github.com/bytedance/USO)
- [æ¨¡å‹æƒé‡](https://huggingface.co/bytedance-research/USO)

## å­—èŠ‚è·³åŠ¨ USO ComfyUI åŸç”Ÿå·¥ä½œæµ

<UpdateReminder/>

### 1. å·¥ä½œæµå’Œè¾“å…¥

ä¸‹è½½ä¸‹æ–¹å›¾åƒå¹¶æ‹–æ‹½åˆ° ComfyUI ä¸­ä»¥åŠ è½½å¯¹åº”çš„å·¥ä½œæµã€‚

![å·¥ä½œæµ](https://raw.githubusercontent.com/Comfy-Org/example_workflows/refs/heads/main/flux/bytedance-uso/bytedance-uso.png)

<a 
className="prose"
target='_blank'
href="https://raw.githubusercontent.com/Comfy-Org/workflow_templates/refs/heads/main/templates/flux1_dev_uso_reference_image_gen.json"
style={{ display: 'inline-block', backgroundColor: '#0078D6', color: '#ffffff', padding: '10px 20px', borderRadius: '8px', borderColor: "transparent", textDecoration: 'none', fontWeight: 'bold'}}
>
    <p className="prose" style={{ margin: 0, fontSize: "0.8rem" }}>ä¸‹è½½ JSON å·¥ä½œæµ</p>
</a>

ä½¿ç”¨ä¸‹é¢çš„å›¾ç‰‡ä½œä¸ºè¾“å…¥

![è¾“å…¥å›¾åƒ](https://raw.githubusercontent.com/Comfy-Org/example_workflows/refs/heads/main/flux/bytedance-uso/input.png)

### 2. æ¨¡å‹é“¾æ¥

**checkpoints**

- [flux1-dev-fp8.safetensors](https://huggingface.co/Comfy-Org/flux1-dev/resolve/main/flux1-dev-fp8.safetensors)

**loras**

- [uso-flux1-dit-lora-v1.safetensors](https://huggingface.co/Comfy-Org/USO_1.0_Repackaged/resolve/main/split_files/loras/uso-flux1-dit-lora-v1.safetensors)

**model_patches**

- [uso-flux1-projector-v1.safetensors](https://huggingface.co/Comfy-Org/USO_1.0_Repackaged/resolve/main/split_files/model_patches/uso-flux1-projector-v1.safetensors)

**clip_visions**
- [sigclip_vision_patch14_384.safetensors](https://huggingface.co/Comfy-Org/sigclip_vision_384/resolve/main/sigclip_vision_patch14_384.safetensors)

è¯·ä¸‹è½½æ‰€æœ‰æ¨¡å‹å¹¶å°†å®ƒä»¬æ”¾ç½®åœ¨ä»¥ä¸‹ç›®å½•ä¸­ï¼š

```
ğŸ“‚ ComfyUI/
â”œâ”€â”€ ğŸ“‚ models/
â”‚   â”œâ”€â”€ ğŸ“‚ checkpoints/
â”‚   â”‚   â””â”€â”€ flux1-dev-fp8.safetensors
â”‚   â”œâ”€â”€ ğŸ“‚ loras/
â”‚   â”‚   â””â”€â”€ uso-flux1-dit-lora-v1.safetensors
â”‚   â”œâ”€â”€ ğŸ“‚ model_patches/
â”‚   â”‚   â””â”€â”€ uso-flux1-projector-v1.safetensors
â”‚   â”œâ”€â”€ ğŸ“‚ clip_visions/
â”‚   â”‚   â””â”€â”€ sigclip_vision_patch14_384.safetensors
```


### 3. å·¥ä½œæµè¯´æ˜

![å·¥ä½œæµè¯´æ˜](/images/tutorial/flux/flux1_uso_reference_image_gen.jpg)

1. åŠ è½½æ¨¡å‹ï¼š
    - 1.1 ç¡®ä¿ `Load Checkpoint` èŠ‚ç‚¹å·²åŠ è½½ `flux1-dev-fp8.safetensors`
    - 1.2 ç¡®ä¿ `LoraLoaderModelOnly` èŠ‚ç‚¹å·²åŠ è½½ `dit_lora.safetensors`
    - 1.3 ç¡®ä¿ `ModelPatchLoader` èŠ‚ç‚¹å·²åŠ è½½ `projector.safetensors`
    - 1.4 ç¡®ä¿ `Load CLIP Vision` èŠ‚ç‚¹å·²åŠ è½½ `sigclip_vision_patch14_384.safetensors`
2. 
 - 2.1 ç‚¹å‡» `Upload` ä¸Šä¼ æˆ‘ä»¬æä¾›çš„è¾“å…¥å›¾åƒ
 - 2.2 `ImageScaleToMaxDimension` èŠ‚ç‚¹å°†ä¼šç¼©æ”¾ä½ çš„è¾“å…¥å›¾åƒç”¨äºå†…å®¹å‚è€ƒï¼Œ512px ä¼šä¿ç•™æ›´å¤šçš„è§’è‰²ç‰¹å¾ï¼Œä½†å¦‚æœä½ ä»…ä½¿ç”¨è§’è‰²å¤´éƒ¨ä½œä¸ºè¾“å…¥ï¼Œæœ€ç»ˆè¾“å‡ºå›¾åƒå¾€å¾€ä¼šæœ‰è§’è‰²å æ®å¤ªå¤šç©ºé—´çš„é—®é¢˜(æˆ–è€…ç»“æœå¾ˆç³Ÿ)ã€‚è®¾ç½®ä¸º 1024px ä¼šå¾—åˆ°æ›´å¥½çš„ç»“æœã€‚  
3. åœ¨ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åªä½¿ç”¨ `content reference` å›¾åƒè¾“å…¥ã€‚å¦‚æœä½ æƒ³ä½¿ç”¨ `style reference` å›¾åƒè¾“å…¥ï¼Œå¯ä»¥ä½¿ç”¨ `Ctrl+B` ç»•è¿‡æ ‡è®°çš„èŠ‚ç‚¹ç»„ã€‚
4. ç¼–å†™ä½ çš„æç¤ºè¯æˆ–ä¿æŒé»˜è®¤è®¾ç½®
5. å¦‚æœéœ€è¦è°ƒæ•´è¾“å‡ºå›¾åƒå°ºå¯¸
6. EasyCache èŠ‚ç‚¹ç”¨äºæ¨ç†åŠ é€Ÿï¼Œä½†ä¹Ÿä¼šç‰ºç‰²ä¸€äº›è´¨é‡å’Œç»†èŠ‚ã€‚å¦‚æœä¸éœ€è¦ä½¿ç”¨ï¼Œå¯ä»¥ç”¨ `Ctrl+B` ç»•è¿‡å®ƒã€‚
7. ç‚¹å‡» `Run` æŒ‰é’®ï¼Œæˆ–ä½¿ç”¨å¿«æ·é”® `Ctrl(Cmd) + Enter` è¿è¡Œå·¥ä½œæµ

### 4. è¡¥å……è¯´æ˜

1. ä»…ä½¿ç”¨é£æ ¼å‚è€ƒï¼š

æˆ‘ä»¬åœ¨åŒä¸€ä¸ªå·¥ä½œæµä¸­ä¹Ÿæä¾›äº†ä»…ä½¿ç”¨é£æ ¼å‚è€ƒçš„ç‰ˆæœ¬
![å·¥ä½œæµ](/images/tutorial/flux/flux1_uso_reference_image_gen_style_reference_only.jpg)
å”¯ä¸€çš„åŒºåˆ«æ˜¯æˆ‘ä»¬æ›¿æ¢äº† `content reference` èŠ‚ç‚¹ï¼Œä»…ä½¿ç”¨ `Empty Latent Image` èŠ‚ç‚¹æ¥åˆ›å»ºä¸€ä¸ªæˆ‘ä»¬éœ€è¦çš„å›¾åƒå¤§å°

2. ä½ ä¹Ÿå¯ä»¥ **ç»•è¿‡ï¼ˆCtrl+Bï¼‰** æ•´ä¸ª `Style Reference` ç»„ï¼Œå°†å·¥ä½œæµç”¨ä½œæ–‡æœ¬åˆ°å›¾åƒçš„å·¥ä½œæµï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªæ–‡æœ¬å­˜åœ¨ 4 ä¸ªå˜ä½“
- ä»…ä½¿ç”¨å†…å®¹ï¼ˆä¸»ä½“ï¼‰å‚è€ƒ
- ä»…ä½¿ç”¨é£æ ¼å‚è€ƒ
- æ··åˆå†…å®¹åŠé£æ ¼å‚è€ƒ
- ä½œä¸ºæ–‡ç”Ÿå›¾å·¥ä½œæµ
