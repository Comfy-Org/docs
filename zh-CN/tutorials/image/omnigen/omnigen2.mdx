---
title: "ComfyUI OmniGen2 åŸç”Ÿå·¥ä½œæµç¤ºä¾‹"
description: "ComfyUI OmniGen2 åŸç”Ÿå·¥ä½œæµç¤ºä¾‹ - ç»Ÿä¸€çš„æ–‡ç”Ÿå›¾ã€å›¾åƒç¼–è¾‘å’Œå¤šå›¾åƒåˆæˆæ¨¡å‹ã€‚"
sidebarTitle: "OmniGen2"
---

import UpdateReminder from '/snippets/zh/tutorials/update-reminder.mdx'

## å…³äº OmniGen2

OmniGen2 æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”é«˜æ•ˆçš„ç»Ÿä¸€å¤šæ¨¡æ€ç”Ÿæˆæ¨¡å‹ï¼Œæ€»å‚æ•°é‡çº¦ **7B**ï¼ˆ3B æ–‡æœ¬æ¨¡å‹ + 4B å›¾åƒç”Ÿæˆæ¨¡å‹ï¼‰ã€‚ä¸ OmniGen v1 ä¸åŒï¼ŒOmniGen2 é‡‡ç”¨åˆ›æ–°çš„åŒè·¯å¾„ Transformer æ¶æ„ï¼Œå…·æœ‰å®Œå…¨ç‹¬ç«‹çš„æ–‡æœ¬è‡ªå›å½’æ¨¡å‹å’Œå›¾åƒæ‰©æ•£æ¨¡å‹ï¼Œå®ç°å‚æ•°è§£è€¦å’Œä¸“é—¨ä¼˜åŒ–ã€‚

### æ¨¡å‹äº®ç‚¹
- **è§†è§‰ç†è§£**ï¼šç»§æ‰¿äº† Qwen-VL-2.5 åŸºç¡€æ¨¡å‹å¼ºå¤§çš„å›¾åƒå†…å®¹è§£é‡Šå’Œåˆ†æèƒ½åŠ›
- **æ–‡ç”Ÿå›¾ç”Ÿæˆ**ï¼šä»æ–‡æœ¬æç¤ºåˆ›å»ºé«˜ä¿çœŸåº¦å’Œç¾è§‚çš„å›¾åƒ
- **æŒ‡ä»¤å¼•å¯¼çš„å›¾åƒç¼–è¾‘**ï¼šæ‰§è¡Œå¤æ‚çš„ã€åŸºäºæŒ‡ä»¤çš„å›¾åƒä¿®æ”¹ï¼Œåœ¨å¼€æºæ¨¡å‹ä¸­è¾¾åˆ°æœ€å…ˆè¿›çš„æ€§èƒ½
- **ä¸Šä¸‹æ–‡ç”Ÿæˆ**ï¼šå¤šåŠŸèƒ½çš„èƒ½åŠ›ï¼Œå¯ä»¥å¤„ç†å’Œçµæ´»ç»“åˆå¤šæ ·åŒ–çš„è¾“å…¥ï¼ˆåŒ…æ‹¬äººç‰©ã€å‚è€ƒå¯¹è±¡å’Œåœºæ™¯ï¼‰ï¼Œäº§ç”Ÿæ–°é¢–ä¸”è¿è´¯çš„è§†è§‰è¾“å‡º

### æŠ€æœ¯ç‰¹æ€§
- **åŒè·¯å¾„æ¶æ„**ï¼šåŸºäº Qwen 2.5 VLï¼ˆ3Bï¼‰æ–‡æœ¬ç¼–ç å™¨ + ç‹¬ç«‹æ‰©æ•£ Transformerï¼ˆ4Bï¼‰
- **Omni-RoPE ä½ç½®ç¼–ç **ï¼šæ”¯æŒå¤šå›¾åƒç©ºé—´å®šä½å’Œèº«ä»½åŒºåˆ†
- **å‚æ•°è§£è€¦è®¾è®¡**ï¼šé¿å…æ–‡æœ¬ç”Ÿæˆå¯¹å›¾åƒè´¨é‡çš„è´Ÿé¢å½±å“
- æ”¯æŒå¤æ‚çš„æ–‡æœ¬ç†è§£å’Œå›¾åƒç†è§£
- å¯æ§çš„å›¾åƒç”Ÿæˆå’Œç¼–è¾‘
- ä¼˜ç§€çš„ç»†èŠ‚ä¿æŒèƒ½åŠ›
- ç»Ÿä¸€æ¶æ„æ”¯æŒå¤šç§å›¾åƒç”Ÿæˆä»»åŠ¡
- æ–‡å­—ç”Ÿæˆèƒ½åŠ›ï¼šå¯ä»¥åœ¨å›¾åƒä¸­ç”Ÿæˆæ¸…æ™°çš„æ–‡å­—å†…å®¹

<UpdateReminder/>

## OmniGen2 æ¨¡å‹ä¸‹è½½

ç”±äºæœ¬æ–‡æ¶‰åŠä¸åŒå·¥ä½œæµï¼Œå¯¹åº”çš„æ¨¡å‹æ–‡ä»¶åŠå®‰è£…ä½ç½®å¦‚ä¸‹ï¼Œå¯¹åº”å·¥ä½œæµä¸­ä¹Ÿå·²åŒ…å«äº†æ¨¡å‹æ–‡ä»¶ä¸‹è½½ä¿¡æ¯ï¼š

**Diffusion Modelsï¼‰**
- [omnigen2_fp16.safetensors](https://huggingface.co/Comfy-Org/Omnigen2_ComfyUI_repackaged/resolve/main/split_files/diffusion_models/omnigen2_fp16.safetensors)

**VAE**
- [ae.safetensors](https://huggingface.co/Comfy-Org/Lumina_Image_2.0_Repackaged/resolve/main/split_files/vae/ae.safetensors)

**Text Encodersï¼‰**
- [qwen_2.5_vl_fp16.safetensors](https://huggingface.co/Comfy-Org/Omnigen2_ComfyUI_repackaged/resolve/main/split_files/text_encoders/qwen_2.5_vl_fp16.safetensors)


æ–‡ä»¶ä¿å­˜ä½ç½®ï¼š
```
ğŸ“‚ ComfyUI/
â”œâ”€â”€ ğŸ“‚ models/
â”‚   â”œâ”€â”€ ğŸ“‚ diffusion_models/
â”‚   â”‚   â””â”€â”€ omnigen2_fp16.safetensors
â”‚   â”œâ”€â”€ ğŸ“‚ vae/
â”‚   â”‚   â””â”€â”€ ae.safetensors
â”‚   â””â”€â”€ ğŸ“‚ text_encoders/
â”‚       â””â”€â”€ qwen_2.5_vl_fp16.safetensors
```

## ComfyUI OmniGen2 æ–‡ç”Ÿå›¾å·¥ä½œæµ

### 1. å·¥ä½œæµæ–‡ä»¶ä¸‹è½½

![æ–‡ç”Ÿå›¾å·¥ä½œæµ](https://raw.githubusercontent.com/Comfy-Org/example_workflows/main/image/omnigen2/image_omnigen2_t2i.png)

### 2. æŒ‰æ­¥éª¤å®Œæˆå·¥ä½œæµè¿è¡Œ

![å·¥ä½œæµä½¿ç”¨æ­¥éª¤å›¾](/images/tutorial/image/omnigen/omnigen2_t2i_step_guide.jpg)

è¯·å‚ç…§å›¾ç‰‡åºå·è¿›è¡Œé€æ­¥ç¡®è®¤ï¼Œæ¥ä¿è¯å¯¹åº”å·¥ä½œæµçš„é¡ºåˆ©è¿è¡Œï¼š

1. **åŠ è½½ä¸»æ¨¡å‹**ï¼šç¡®ä¿ `Load Diffusion Model` èŠ‚ç‚¹åŠ è½½äº† `omnigen2_fp16.safetensors`
2. **åŠ è½½æ–‡æœ¬ç¼–ç å™¨**ï¼šç¡®ä¿ `Load CLIP` èŠ‚ç‚¹åŠ è½½äº† `qwen_2.5_vl_fp16.safetensors`
3. **åŠ è½½ VAE**ï¼šç¡®ä¿ `Load VAE` èŠ‚ç‚¹åŠ è½½äº† `ae.safetensors`
4. **è®¾ç½®å›¾åƒå°ºå¯¸**ï¼šåœ¨ `EmptySD3LatentImage` èŠ‚ç‚¹è®¾ç½®ç”Ÿæˆå›¾ç‰‡çš„å°ºå¯¸ï¼ˆæ¨è 1024x1024ï¼‰
5. **è¾“å…¥æç¤ºè¯**ï¼š
    - åœ¨ç¬¬ä¸€ä¸ª `CLipTextEncode` èŠ‚ç‚¹ä¸­è¾“å…¥æ­£å‘æç¤ºè¯ï¼ˆæƒ³è¦å‡ºç°åœ¨å›¾åƒä¸­çš„å†…å®¹ï¼‰
    - åœ¨ç¬¬äºŒä¸ª `CLipTextEncode` èŠ‚ç‚¹ä¸­è¾“å…¥è´Ÿå‘æç¤ºè¯ï¼ˆä¸æƒ³è¦å‡ºç°åœ¨å›¾åƒä¸­çš„å†…å®¹ï¼‰
6. **å¼€å§‹ç”Ÿæˆ**ï¼šç‚¹å‡» `Queue Prompt` æŒ‰é’®ï¼Œæˆ–ä½¿ç”¨å¿«æ·é”® `Ctrl(cmd) + Enter(å›è½¦)` æ¥æ‰§è¡Œæ–‡ç”Ÿå›¾
7. **æŸ¥çœ‹ç»“æœ**ï¼šç”Ÿæˆå®Œæˆåå¯¹åº”çš„å›¾ç‰‡ä¼šè‡ªåŠ¨ä¿å­˜åˆ° `ComfyUI/output/` ç›®å½•ä¸‹ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ `SaveImage` èŠ‚ç‚¹ä¸­é¢„è§ˆ

## ComfyUI OmniGen2 å›¾ç‰‡ç¼–è¾‘å·¥ä½œæµ

OmniGen2 æœ‰ä¸°å¯Œçš„å›¾åƒç¼–è¾‘èƒ½åŠ›ï¼Œå¹¶ä¸”æ”¯æŒä¸ºå›¾åƒæ·»åŠ æ–‡æœ¬

### 1. å·¥ä½œæµæ–‡ä»¶ä¸‹è½½

![è¾“å…¥å›¾ç‰‡](https://raw.githubusercontent.com/Comfy-Org/example_workflows/main/image/omnigen2/image_omnigen2_image_edit.png)
ä¸‹è½½ä¸‹é¢çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒä½œä¸ºè¾“å…¥å›¾ç‰‡ã€‚
![è¾“å…¥å›¾ç‰‡](https://raw.githubusercontent.com/Comfy-Org/example_workflows/main/image/omnigen2/input_fairy.png)


### 2. æŒ‰æ­¥éª¤å®Œæˆå·¥ä½œæµè¿è¡Œ

![å·¥ä½œæµä½¿ç”¨æ­¥éª¤å›¾](/images/tutorial/image/omnigen/omnigen2_image_edit_step_guide.jpg)

1. **åŠ è½½ä¸»æ¨¡å‹**ï¼šç¡®ä¿ `Load Diffusion Model` èŠ‚ç‚¹åŠ è½½äº† `omnigen2_fp16.safetensors`
2. **åŠ è½½æ–‡æœ¬ç¼–ç å™¨**ï¼šç¡®ä¿ `Load CLIP` èŠ‚ç‚¹åŠ è½½äº† `qwen_2.5_vl_fp16.safetensors`
3. **åŠ è½½ VAE**ï¼šç¡®ä¿ `Load VAE` èŠ‚ç‚¹åŠ è½½äº† `ae.safetensors`
4. **ä¸Šä¼ å›¾åƒ**ï¼šåœ¨ `Load Image` èŠ‚ç‚¹ä¸­ä¸Šä¼ æä¾›çš„å›¾ç‰‡
5. **è¾“å…¥æç¤ºè¯**ï¼š
    - åœ¨ç¬¬ä¸€ä¸ª `CLipTextEncode` èŠ‚ç‚¹ä¸­è¾“å…¥æ­£å‘æç¤ºè¯ï¼ˆæƒ³è¦å‡ºç°åœ¨å›¾åƒä¸­çš„å†…å®¹ï¼‰
    - åœ¨ç¬¬äºŒä¸ª `CLipTextEncode` èŠ‚ç‚¹ä¸­è¾“å…¥è´Ÿå‘æç¤ºè¯ï¼ˆä¸æƒ³è¦å‡ºç°åœ¨å›¾åƒä¸­çš„å†…å®¹ï¼‰
6. **å¼€å§‹ç”Ÿæˆ**ï¼šç‚¹å‡» `Queue Prompt` æŒ‰é’®ï¼Œæˆ–ä½¿ç”¨å¿«æ·é”® `Ctrl(cmd) + Enter(å›è½¦)` æ¥æ‰§è¡Œæ–‡ç”Ÿå›¾
7. **æŸ¥çœ‹ç»“æœ**ï¼šç”Ÿæˆå®Œæˆåå¯¹åº”çš„å›¾ç‰‡ä¼šè‡ªåŠ¨ä¿å­˜åˆ° `ComfyUI/output/` ç›®å½•ä¸‹ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ `SaveImage` èŠ‚ç‚¹ä¸­é¢„è§ˆ

### 3. å·¥ä½œæµè¡¥å……è¯´æ˜

- å¦‚æœä½ æƒ³è¦å¯ç”¨ç¬¬äºŒå¼ å›¾åƒè¾“å…¥ ï¼Œä½ å¯ä»¥å°†å·¥ä½œæµä¸­çŠ¶æ€ä¸ºç²‰ç´«è‰²çš„èŠ‚ç‚¹ä½¿ç”¨å¿«æ·é”® **Ctrl + B** æ¥å¯ç”¨å¯¹åº”çš„èŠ‚ç‚¹è¾“å…¥
- å¦‚æœä½ æƒ³è¦è‡ªå®šä¹‰å°ºå¯¸ ï¼Œå¯ä»¥åˆ é™¤é“¾æ¥ `EmptySD3LatentImage` èŠ‚ç‚¹çš„ `Get image size` èŠ‚ç‚¹ï¼Œå¹¶è¾“å…¥è‡ªå®šä¹‰å°ºå¯¸
