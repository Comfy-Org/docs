---
title: "Qwen-Image ComfyUIåŸç”Ÿå·¥ä½œæµç¤ºä¾‹"
description: "Qwen-Image æ˜¯ä¸€ä¸ªæ‹¥æœ‰ 20B å‚æ•°çš„ MMDiTï¼ˆå¤šæ¨¡æ€æ‰©æ•£å˜æ¢å™¨ï¼‰æ¨¡å‹ï¼ŒåŸºäº Apache 2.0 è®¸å¯è¯å¼€æºã€‚"
sidebarTitle: "Qwen-Image"
---

import UpdateReminder from '/snippets/zh/tutorials/update-reminder.mdx'


**Qwen-Image** æ˜¯é˜¿é‡Œå·´å·´é€šä¹‰åƒé—®å›¢é˜Ÿå‘å¸ƒçš„é¦–ä¸ªå›¾åƒç”ŸæˆåŸºç¡€æ¨¡å‹ï¼Œè¿™æ˜¯ä¸€ä¸ªæ‹¥æœ‰ 20B å‚æ•°çš„ MMDiTï¼ˆå¤šæ¨¡æ€æ‰©æ•£å˜æ¢å™¨ï¼‰æ¨¡å‹ï¼ŒåŸºäº Apache 2.0 è®¸å¯è¯å¼€æºã€‚è¯¥æ¨¡å‹åœ¨**å¤æ‚æ–‡æœ¬æ¸²æŸ“**å’Œ**ç²¾ç¡®å›¾åƒç¼–è¾‘**æ–¹é¢å–å¾—äº†æ˜¾è‘—è¿›å±•ï¼Œæ— è®ºæ˜¯è‹±è¯­è¿˜æ˜¯ä¸­æ–‡ç­‰å¤šç§è¯­è¨€éƒ½èƒ½å®ç°é«˜ä¿çœŸè¾“å‡ºã€‚

**æ¨¡å‹äº®ç‚¹**ï¼š
- **å“è¶Šçš„å¤šè¯­è¨€æ–‡æœ¬æ¸²æŸ“**ï¼šæ”¯æŒè‹±è¯­ã€ä¸­æ–‡ã€éŸ©è¯­ã€æ—¥è¯­ç­‰å¤šç§è¯­è¨€çš„é«˜ç²¾åº¦æ–‡æœ¬ç”Ÿæˆï¼Œä¿æŒå­—ä½“ç»†èŠ‚å’Œå¸ƒå±€ä¸€è‡´æ€§
- **å¤šæ ·åŒ–è‰ºæœ¯é£æ ¼**ï¼šä»ç…§ç‰‡çº§çœŸå®åˆ°å°è±¡æ´¾ç»˜ç”»ï¼Œä»åŠ¨æ¼«ç¾å­¦åˆ°æç®€è®¾è®¡ï¼Œæµç•…é€‚åº”å„ç§åˆ›æ„æç¤º

*ç›¸å…³é“¾æ¥**:
 - [GitHub](https://github.com/QwenLM/Qwen-Image)
 - [Hugging Face](https://huggingface.co/Qwen/Qwen-Image)
 - [ModelScope](https://modelscope.cn/models/qwen/Qwen-Image)

 å¦å¤–ç›®å‰ Qwen-Image æœ‰å¤šç§ ControlNet æ”¯æŒ
- [Qwen-Image-DiffSynth-ControlNets/model_patches](https://huggingface.co/Comfy-Org/Qwen-Image-DiffSynth-ControlNets/tree/main/split_files/model_patches): åŒ…æ‹¬ cannyã€depthã€inpaint ä¸‰ä¸ªæ¨¡å‹
- [qwen_image_union_diffsynth_lora.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image-DiffSynth-ControlNets/blob/main/split_files/loras/qwen_image_union_diffsynth_lora.safetensors): å›¾åƒç»“æ„æ§åˆ¶lora æ”¯æŒ cannyã€depthã€poseã€lineartã€softedgeã€normalã€openpose
- instanX ControlNet: å¾…æ›´æ–°

## ComfyOrg Qwen-Image live stream

**Qwen-Image in ComfyUI - Lightning & LoRAs**

<iframe
  className="w-full aspect-video rounded-xl"
  src="https://www.youtube.com/embed/WBFHwrpYRtY?si=uREGRhBDryTJBIry"
  title="Qwen-Image in ComfyUI - Lightning & LoRAs / August 15th, 2025"
  allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowFullScreen
></iframe>


**Qwen-Image ControlNet in ComfyUI - DiffSynth**

<iframe
  className="w-full aspect-video rounded-xl"
  src="https://www.youtube.com/embed/bXMClHfEFn4?si=dcaNdqOMSwvu3t8x"
  title="Qwen-Image ControlNet in ComfyUI - DiffSynth / August 26th, 2025"
  allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowFullScreen
></iframe>


## Qwen-Image åŸç”Ÿå·¥ä½œæµç¤ºä¾‹

<UpdateReminder />

åœ¨æœ¬ç¯‡æ–‡æ¡£æ‰€é™„å·¥ä½œæµä¸­ä½¿ç”¨çš„ä¸åŒæ¨¡å‹æœ‰ä¸‰ç§
1. Qwen-Image åŸç‰ˆæ¨¡å‹ fp8_e4m3fn
2. 8æ­¥åŠ é€Ÿç‰ˆï¼š Qwen-Image åŸç‰ˆæ¨¡å‹ fp8_e4m3fn ä½¿ç”¨ lightx2v 8æ­¥ LoRA,
3. è’¸é¦ç‰ˆ:Qwen-Image è’¸é¦ç‰ˆæ¨¡å‹ fp8_e4m3fn

**æ˜¾å­˜ä½¿ç”¨å‚è€ƒ**
GPU: RTX4090D 24GB

| ä½¿ç”¨æ¨¡å‹                           | VRAM Usage | é¦–æ¬¡ç”Ÿæˆ   | ç¬¬äºŒæ¬¡ç”Ÿæˆ  |
| --------------------------------- | ---------- | -------- | ---------- |
| fp8_e4m3fn                        | 86%        | â‰ˆ 94s    | â‰ˆ 71s      |
| fp8_e4m3fn ä½¿ç”¨ lightx2v 8æ­¥ LoRA  | 86%        | â‰ˆ 55s    | â‰ˆ 34s      |
| è’¸é¦ç‰ˆ fp8_e4m3fn                  | 86%        | â‰ˆ 69s    | â‰ˆ 36s      |

### 1. å·¥ä½œæµæ–‡ä»¶

æ›´æ–° ComfyUI åä½ å¯ä»¥ä»æ¨¡æ¿ä¸­æ‰¾åˆ°å·¥ä½œæµæ–‡ä»¶ï¼Œæˆ–è€…å°†ä¸‹é¢çš„å·¥ä½œæµæ‹–å…¥ ComfyUI ä¸­åŠ è½½
![Qwen-image æ–‡ç”Ÿå›¾å·¥ä½œæµ](https://raw.githubusercontent.com/Comfy-Org/example_workflows/main/image/qwen/qwen-image.png)

<a className="prose"  target='_blank'  href="https://raw.githubusercontent.com/Comfy-Org/workflow_templates/refs/heads/main/templates/image_qwen_image.json" style={{ display: 'inline-block', backgroundColor: '#0078D6', color: '#ffffff', padding: '10px 20px', borderRadius: '8px', borderColor: "transparent", textDecoration: 'none', fontWeight: 'bold'}}>
    <p className="prose" style={{ margin: 0, fontSize: "0.8rem" }}>ä¸‹è½½åŸå§‹ç‰ˆ JSON æ ¼å¼å·¥ä½œæµ</p>
</a>

è’¸é¦ç‰ˆ
<a className="prose"  target='_blank'  href="https://raw.githubusercontent.com/Comfy-Org/example_workflows/main/image/qwen/image_qwen_image_distill.json" style={{ display: 'inline-block', backgroundColor: '#0078D6', color: '#ffffff', padding: '10px 20px', borderRadius: '8px', borderColor: "transparent", textDecoration: 'none', fontWeight: 'bold'}}>
    <p className="prose" style={{ margin: 0, fontSize: "0.8rem" }}>ä¸‹è½½è’¸é¦ç‰ˆJSON æ ¼å¼å·¥ä½œæµ</p>
</a>
### 2. æ¨¡å‹ä¸‹è½½

**ä½ å¯ä»¥åœ¨ ComfyOrg ä»“åº“æ‰¾åˆ°çš„ç‰ˆæœ¬**
- Qwen-Image_bf16 (40.9 GB)
- Qwen-Image_fp8 (20.4 GB)
- è’¸é¦ç‰ˆæœ¬ (éå®˜æ–¹ï¼Œä»…éœ€ 15 æ­¥)


æ‰€æœ‰æ¨¡å‹å‡å¯åœ¨ [Huggingface](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/tree/main) æˆ–è€… [é­”æ­](https://modelscope.cn/models/Comfy-Org/Qwen-Image_ComfyUI/files) æ‰¾åˆ°

**Diffusion model**

- [qwen_image_fp8_e4m3fn.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_fp8_e4m3fn.safetensors)

Qwen_image_distill

- [qwen_image_distill_full_fp8_e4m3fn.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/non_official/diffusion_models/qwen_image_distill_full_fp8_e4m3fn.safetensors)
- [qwen_image_distill_full_bf16.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/non_official/diffusion_models/qwen_image_distill_full_bf16.safetensors)

<Note>
 - è’¸é¦ç‰ˆæœ¬åŸå§‹ä½œè€…å»ºè®®åœ¨ 15 æ­¥ cfg 1.0
- ç»æµ‹è¯•è¯¥è’¸é¦ç‰ˆæœ¬åœ¨ 10 æ­¥ cfg 1.0 ä¸‹è¡¨ç°è‰¯å¥½ï¼Œæ ¹æ®ä½ æƒ³è¦çš„å›¾åƒç±»å‹é€‰æ‹© euler æˆ– res_multistep   
</Note>

**LoRA**

- [Qwen-Image-Lightning-8steps-V1.0.safetensors](https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-8steps-V1.0.safetensors)

**Text encoder**

- [qwen_2.5_vl_7b_fp8_scaled.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors)

**VAE**

- [qwen_image_vae.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors)

æ¨¡å‹ä¿å­˜ä½ç½®

```
ğŸ“‚ ComfyUI/
â”œâ”€â”€ ğŸ“‚ models/
â”‚   â”œâ”€â”€ ğŸ“‚ diffusion_models/
â”‚   â”‚   â”œâ”€â”€ qwen_image_fp8_e4m3fn.safetensors
â”‚   â”‚   â””â”€â”€ qwen_image_distill_full_fp8_e4m3fn.safetensors ## è’¸é¦ç‰ˆ
â”‚   â”œâ”€â”€ ğŸ“‚ loras/
â”‚   â”‚   â””â”€â”€ Qwen-Image-Lightning-8steps-V1.0.safetensors   ## 8æ­¥åŠ é€Ÿ LoRA æ¨¡å‹
â”‚   â”œâ”€â”€ ğŸ“‚ vae/
â”‚   â”‚   â””â”€â”€ qwen_image_vae.safetensors
â”‚   â””â”€â”€ ğŸ“‚ text_encoders/
â”‚       â””â”€â”€ qwen_2.5_vl_7b_fp8_scaled.safetensors
```

### 3. å·¥ä½œæµä½¿ç”¨è¯´æ˜

![æ­¥éª¤å›¾](/images/tutorial/image/qwen/image_qwen_image-guide.jpg)

1. ç¡®ä¿ `Load Diffusion Model`èŠ‚ç‚¹åŠ è½½äº†`qwen_image_fp8_e4m3fn.safetensors`
2. ç¡®ä¿ `Load CLIP`èŠ‚ç‚¹ä¸­åŠ è½½äº†`qwen_2.5_vl_7b_fp8_scaled.safetensors`
3. ç¡®ä¿ `Load VAE`èŠ‚ç‚¹ä¸­åŠ è½½äº†`qwen_image_vae.safetensors`
4. ç¡®ä¿ `EmptySD3LatentImage`èŠ‚ç‚¹ä¸­è®¾ç½®å¥½äº†å›¾ç‰‡çš„å°ºå¯¸
5. åœ¨`CLIP Text Encoder`èŠ‚ç‚¹ä¸­è®¾ç½®å¥½æç¤ºè¯ï¼Œç›®å‰ç»è¿‡æµ‹è¯•ç›®å‰è‡³å°‘æ”¯æŒï¼šè‹±è¯­ã€ä¸­æ–‡ã€éŸ©è¯­ã€æ—¥è¯­ã€æ„å¤§åˆ©è¯­ç­‰
6. å¦‚æœéœ€è¦å¯ç”¨ lightx2v çš„ 8 æ­¥åŠ é€Ÿ LoRA ï¼Œè¯·é€‰ä¸­åç”¨ `Ctrl + B` å¯ç”¨è¯¥èŠ‚ç‚¹ï¼Œå¹¶æŒ‰ åºå·`8` å¤„çš„è®¾ç½®å‚æ•°ä¿®æ”¹ Ksampler çš„è®¾ç½®è®¾ç½®
7. ç‚¹å‡» `Run` æŒ‰é’®ï¼Œæˆ–è€…ä½¿ç”¨å¿«æ·é”® `Ctrl(cmd) + Enter(å›è½¦)` æ¥è¿è¡Œå·¥ä½œæµ
8. å¯¹äºä¸åŒç‰ˆæœ¬çš„æ¨¡å‹å’Œå·¥ä½œæµçš„å¯¹åº” KSampler çš„å‚æ•°è®¾ç½®

<Note>
 è’¸é¦ç‰ˆæ¨¡å‹å’Œ lightx2v çš„ 8 æ­¥åŠ é€Ÿ LoRA ä¼¼ä¹å¹¶ä¸å…¼å®¹ï¼Œä½ å¯ä»¥æµ‹è¯•å…·ä½“çš„ç»„åˆå‚æ•°æ¥éªŒè¯ç»„åˆä½¿ç”¨çš„æ–¹å¼æ˜¯å¦å¯è¡Œ
</Note>

## Qwen Image InstantX ControlNet å·¥ä½œæµ

è¿™æ˜¯ä¸€ä¸ª ControlNet æ¨¡å‹

### 1. å·¥ä½œæµåŠè¾“å…¥å›¾ç‰‡

ä¸‹è½½ä¸‹é¢çš„å›¾ç‰‡å¹¶æ‹–å…¥ ComfyUI ä»¥åŠ è½½å·¥ä½œæµ
![workflow](https://raw.githubusercontent.com/Comfy-Org/example_workflows/refs/heads/main/image/qwen/qwen-image-instantx-controlnet/image_qwen_image_instantx_controlnet.png)

<a className="prose"  target='_blank'  href="https://raw.githubusercontent.com/Comfy-Org/workflow_templates/refs/heads/main/templates/image_qwen_image_instantx_controlnet.json" style={{ display: 'inline-block', backgroundColor: '#0078D6', color: '#ffffff', padding: '10px 20px', borderRadius: '8px', borderColor: "transparent", textDecoration: 'none', fontWeight: 'bold'}}>
    <p className="prose" style={{ margin: 0, fontSize: "0.8rem" }}>ä¸‹è½½ JSON æ ¼å¼å·¥ä½œæµ</p>
</a>

ä¸‹è½½ä¸‹é¢çš„å›¾ç‰‡ä½œä¸ºè¾“å…¥
![input](https://raw.githubusercontent.com/Comfy-Org/example_workflows/refs/heads/main/image/qwen/qwen-image-instantx-controlnet/input.jpg)

### 2. æ¨¡å‹é“¾æ¥

1. InstantX Controlnet

ä¸‹è½½ [Qwen-Image-InstantX-ControlNet-Union.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image-InstantX-ControlNets/resolve/main/split_files/controlnet/Qwen-Image-InstantX-ControlNet-Union.safetensors) å¹¶ä¿å­˜åˆ° `ComfyUI/models/controlnet/` æ–‡ä»¶å¤¹ä¸‹

2. **Lotus Depth model**

<Note>
    ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»ä¼¼ [comfyui_controlnet_aux](https://github.com/Fannovel16/comfyui_controlnet_aux) ç­‰è‡ªå®šä¹‰èŠ‚ç‚¹æ¥å®Œæˆå„ç§ç±»å‹å›¾åƒçš„é¢„å¤„ç†
</Note>

**Lotus Depth æ¨¡å‹**

æˆ‘ä»¬å°†ä½¿ç”¨è¿™ä¸ªæ¨¡å‹æ¥ç”Ÿæˆå›¾åƒçš„æ·±åº¦å›¾ï¼Œå®ƒéœ€è¦å®‰è£…ä»¥ä¸‹ä¸¤ä¸ªæ¨¡å‹ï¼š

**Diffusion Model**

- [lotus-depth-d-v1-1.safetensors](https://huggingface.co/Comfy-Org/lotus/resolve/main/lotus-depth-d-v1-1.safetensors) 

**VAE Model**

- [vae-ft-mse-840000-ema-pruned.safetensors](https://huggingface.co/stabilityai/sd-vae-ft-mse-original/resolve/main/vae-ft-mse-840000-ema-pruned.safetensors)  æˆ–è€…ä»»æ„çš„ SD1.5 çš„ VAE éƒ½å¯ä»¥ä½¿ç”¨

```
ComfyUI/
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ diffusion_models/
â”‚   â”‚   â””â”€â”€â”€ lotus-depth-d-v1-1.safetensors
â”‚   â””â”€â”€ vae/
â”‚       â””â”€â”€  lvae-ft-mse-840000-ema-pruned.safetensors
```

### 3. å·¥ä½œæµè¯´æ˜

![æµç¨‹è¯´æ˜](/images/tutorial/image/qwen/image_qwen_image_instantx_controlnet.jpg)

1. ç¡®ä¿ `Load ControlNet Model` èŠ‚ç‚¹æ­£ç¡®åŠ è½½äº† `Qwen-Image-InstantX-ControlNet-Union.safetensors`  æ¨¡å‹
2. ä¸Šä¼ è¾“å…¥å›¾åƒ
3. è¿™é‡Œæ˜¯ä¸€ä¸ªå­å›¾ï¼Œè¿™é‡Œæ˜¯ ComfyUI æ”¯æŒçš„ lotus Depth æ¨¡å‹ï¼Œä½ å¯ä»¥åœ¨æ¨¡æ¿ä¸­æ‰¾åˆ° Lotus Depth æˆ–è€…ç¼–è¾‘å¯¹åº”å­å›¾äº†è§£å¯¹åº”å·¥ä½œæµï¼Œè¯·ç¡®ä¿æ‰€æœ‰æ¨¡å‹éƒ½æ­£ç¡®åŠ è½½
4. ç‚¹å‡» `Run` æŒ‰é’®ï¼Œæˆ–è€…ä½¿ç”¨å¿«æ·é”® `Ctrl(cmd) + Enter(å›è½¦)` æ¥è¿è¡Œå·¥ä½œæµ

## Qwen Image ControlNet DiffSynth-ControlNets Model Patches å·¥ä½œæµ

è¿™ä¸ªæ¨¡å‹å®é™…ä¸Šå¹¶ä¸æ˜¯ä¸€ä¸ª controlnetï¼Œè€Œæ˜¯ä¸€ä¸ª Model patchï¼Œ æ”¯æŒ cannyã€depthã€inpaint ä¸‰ç§ä¸åŒçš„æ§åˆ¶æ¨¡å¼

åŸå§‹æ¨¡å‹åœ°å€ï¼š[DiffSynth-Studio/Qwen-Image ControlNet](https://www.modelscope.cn/collections/Qwen-Image-ControlNet-6157b44e89d444) 
Comfy Org rehost åœ°å€ï¼š [Qwen-Image-DiffSynth-ControlNets/model_patches](https://huggingface.co/Comfy-Org/Qwen-Image-DiffSynth-ControlNets/tree/main/split_files/model_patches)


### 1. å·¥ä½œæµåŠè¾“å…¥å›¾ç‰‡

ä¸‹è½½ä¸‹é¢çš„å›¾ç‰‡æ‹–å…¥ ComfyUI ä¸­ä»¥åŠ è½½å¯¹åº”çš„å·¥ä½œæµ
![workflow](https://raw.githubusercontent.com/Comfy-Org/example_workflows/refs/heads/main/image/qwen/qwen-image-controlnet-model-patch/image_qwen_image_controlnet_patch.png)

<a className="prose"  target='_blank'  href="https://raw.githubusercontent.com/Comfy-Org/workflow_templates/refs/heads/main/templates/image_qwen_image_controlnet_patch.json" style={{ display: 'inline-block', backgroundColor: '#0078D6', color: '#ffffff', padding: '10px 20px', borderRadius: '8px', borderColor: "transparent", textDecoration: 'none', fontWeight: 'bold'}}>
    <p className="prose" style={{ margin: 0, fontSize: "0.8rem" }}>ä¸‹è½½ JSON æ ¼å¼å·¥ä½œæµ</p>
</a>

ä¸‹è½½ä¸‹é¢çš„å›¾ç‰‡ä½œä¸ºè¾“å…¥å›¾ç‰‡ï¼š

![input](https://raw.githubusercontent.com/Comfy-Org/example_workflows/refs/heads/main/image/qwen/qwen-image-controlnet-model-patch/input.png)

### 2. æ¨¡å‹é“¾æ¥

å…¶å®ƒæ¨¡å‹ä¸ Qwen-Image åŸºç¡€å·¥ä½œæµä¸€è‡´ï¼Œä½ åªéœ€ä¸‹è½½ä¸‹é¢çš„æ¨¡å‹å¹¶ä¿å­˜åˆ° `ComfyUI/models/model_patches` æ–‡ä»¶å¤¹ä¸­

- [qwen_image_canny_diffsynth_controlnet.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image-DiffSynth-ControlNets/resolve/main/split_files/model_patches/qwen_image_canny_diffsynth_controlnet.safetensors)
- [qwen_image_depth_diffsynth_controlnet.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image-DiffSynth-ControlNets/resolve/main/split_files/model_patches/qwen_image_depth_diffsynth_controlnet.safetensors)
- [qwen_image_inpaint_diffsynth_controlnet.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image-DiffSynth-ControlNets/resolve/main/split_files/model_patches/qwen_image_inpaint_diffsynth_controlnet.safetensors)


### 3. å·¥ä½œæµä½¿ç”¨è¯´æ˜

ç›®å‰ diffsynth æœ‰ä¸‰ä¸ª patch çš„æ¨¡å‹ï¼š Cannyã€Detphã€Inpaint ä¸‰ä¸ªæ¨¡å‹

å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ ControlNet ç›¸å…³çš„å·¥ä½œæµï¼Œä½ éœ€è¦äº†è§£çš„æ˜¯ï¼Œç”¨äºæ§åˆ¶çš„å›¾ç‰‡éœ€è¦é¢„å¤„ç†æˆå—æ”¯æŒçš„å›¾åƒæ‰å¯ä»¥è¢«æ¨¡å‹ä½¿ç”¨å’Œè¯†åˆ«

![è¾“å…¥ç±»å‹ç¤ºæ„](/images/tutorial/image/qwen/controlnet_input_types.jpg)

- Canny: å¤„ç†åçš„ canny ï¼Œ çº¿ç¨¿è½®å»“
- Detph: é¢„å¤„ç†åçš„æ·±åº¦å›¾ï¼Œä½“ç°ç©ºé—´å…³ç³»
- Inpaint: éœ€è¦ç”¨ Mask æ ‡è®°éœ€è¦é‡ç»˜çš„éƒ¨åˆ†

ç”±äºè¿™ä¸ª patch æ¨¡å‹åˆ†ä¸ºäº†ä¸‰ä¸ªä¸åŒçš„æ¨¡å‹ï¼Œæ‰€ä»¥ä½ éœ€è¦åœ¨è¾“å…¥æ—¶é€‰æ‹©æ­£ç¡®çš„é¢„å¤„ç†ç±»å‹æ¥ä¿è¯å›¾åƒçš„æ­£ç¡®é¢„å¤„ç†

**Canny æ¨¡å‹ ControlNet ä½¿ç”¨è¯´æ˜**

![Canny å·¥ä½œæµ](/images/tutorial/image/qwen/image_qwen_image_controlnet_patch-canny.jpg)
1. ç¡®ä¿å¯¹åº” `qwen_image_canny_diffsynth_controlnet.safetensors` å·²è¢«åŠ è½½
2. ä¸Šä¼ è¾“å…¥å›¾ç‰‡ï¼Œç”¨äºåç»­å¤„ç†
3. Canny èŠ‚ç‚¹æ˜¯åŸç”Ÿçš„é¢„å¤„ç†èŠ‚ç‚¹ï¼Œå®ƒå°†æŒ‰ç…§ä½ è®¾ç½®çš„å‚æ•°ï¼Œå°†è¾“å…¥å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼Œæ§åˆ¶ç”Ÿæˆ
4. å¦‚æœéœ€è¦å¯ä»¥ä¿®æ”¹ `QwenImageDiffsynthControlnet` èŠ‚ç‚¹çš„ `strength` å¼ºåº¦æ¥æ§åˆ¶çº¿ç¨¿æ§åˆ¶çš„å¼ºåº¦
5. ç‚¹å‡» `Run` æŒ‰é’®ï¼Œæˆ–è€…ä½¿ç”¨å¿«æ·é”® `Ctrl(cmd) + Enter(å›è½¦)` æ¥è¿è¡Œå·¥ä½œæµ

> å¯¹äº qwen_image_depth_diffsynth_controlnet.safetensors ä½¿ç”¨ï¼Œéœ€è¦å°†å›¾åƒé¢„å¤„ç†æˆ detph æ·±åº¦å›¾ï¼Œæ›¿æ¢æ‰ `image proccessing` å›¾ï¼Œå¯¹äºè¿™éƒ¨åˆ†çš„ä½¿ç”¨ï¼Œè¯·å‚è€ƒæœ¬ç¯‡æ–‡æ¡£ä¸­ InstantX çš„å¤„ç†æ–¹æ³•ï¼Œå…¶å®ƒéƒ¨åˆ†ä¸ Canny æ¨¡å‹çš„ä½¿ç”¨ç±»ä¼¼

**Inpaint æ¨¡å‹ ControlNet ä½¿ç”¨è¯´æ˜**
![Inpaint å·¥ä½œæµ](/images/tutorial/image/qwen/image_qwen_image_controlnet_patch-inpaint.jpg)

å¯¹äº Inpaint æ¨¡å‹ï¼Œå®ƒéœ€è¦ä½¿ç”¨ [è’™ç‰ˆç¼–è¾‘å™¨](/zh-CN/interface/maskeditor)ï¼Œæ¥ç»˜åˆ¶ä¸€ä¸ªè’™ç‰ˆç„¶åä½œä¸ºè¾“å…¥æ§åˆ¶æ¡ä»¶

1. ç¡®ä¿ `ModelPatchLoader` åŠ è½½çš„æ˜¯ `qwen_image_inpaint_diffsynth_controlnet.safetensors` æ¨¡å‹
2. ä¸Šä¼ å›¾ç‰‡ï¼Œå¹¶ä½¿ç”¨[è’™ç‰ˆç¼–è¾‘å™¨](/zh-CN/interface/maskeditor) ç»˜åˆ¶è’™ç‰ˆï¼Œä½ éœ€è¦å°†å¯¹åº” `Load Image`èŠ‚ç‚¹çš„ `mask` è¾“å‡ºè¿æ¥åˆ° `QwenImageDiffsynthControlnet` çš„ `mask` è¾“å…¥æ‰èƒ½ä¿è¯å¯¹åº”çš„è’™ç‰ˆè¢«åŠ è½½
3. ä½¿ç”¨ `Ctrl-B` å¿«æ·é”®ï¼Œå°†åŸæœ¬å·¥ä½œæµä¸­çš„ Canny è®¾ç½®ä¸ºç»•è¿‡æ¨¡å¼ï¼Œæ¥ä½¿å¾—å¯¹åº”çš„ Canny èŠ‚ç‚¹å¤„ç†ä¸ç”Ÿæ•ˆ
4. åœ¨ `CLIP Text Encoder`  è¾“å…¥ä½ éœ€è¦å°†è’™ç‰ˆéƒ¨åˆ†ä¿®æ”¹æˆæ ·å¼ 
5. å¦‚éœ€è¦å¯ä»¥ä¿®æ”¹ `QwenImageDiffsynthControlnet` èŠ‚ç‚¹çš„ `strength` å¼ºåº¦æ¥æ§åˆ¶å¯¹åº”çš„æ§åˆ¶å¼ºåº¦
6. ç‚¹å‡» `Run` æŒ‰é’®ï¼Œæˆ–è€…ä½¿ç”¨å¿«æ·é”® `Ctrl(cmd) + Enter(å›è½¦)` æ¥è¿è¡Œå·¥ä½œæµ

## Qwen Image union ControlNet LoRA å·¥ä½œæµ

åŸå§‹æ¨¡å‹åœ°å€ï¼š[DiffSynth-Studio/Qwen-Image-In-Context-Control-Union](https://www.modelscope.cn/models/DiffSynth-Studio/Qwen-Image-In-Context-Control-Union/)
Comfy Org reshot åœ°å€: [qwen_image_union_diffsynth_lora.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image-DiffSynth-ControlNets/blob/main/split_files/loras/qwen_image_union_diffsynth_lora.safetensors): å›¾åƒç»“æ„æ§åˆ¶lora æ”¯æŒ cannyã€depthã€postã€lineartã€softedgeã€normalã€openpose

### 1. å·¥ä½œæµåŠè¾“å…¥å›¾ç‰‡

ä¸‹è½½ä¸‹é¢çš„å›¾ç‰‡å¹¶æ‹–å…¥ ComfyUI ä»¥åŠ è½½å·¥ä½œæµ
![workflow](https://raw.githubusercontent.com/Comfy-Org/example_workflows/refs/heads/main/image/qwen/qwen-image-union-control-lora/image_qwen_image_union_control_lora.png)
<a className="prose"  target='_blank'  href="https://raw.githubusercontent.com/Comfy-Org/workflow_templates/refs/heads/main/templates/image_qwen_image_union_control_lora.json" style={{ display: 'inline-block', backgroundColor: '#0078D6', color: '#ffffff', padding: '10px 20px', borderRadius: '8px', borderColor: "transparent", textDecoration: 'none', fontWeight: 'bold'}}>
    <p className="prose" style={{ margin: 0, fontSize: "0.8rem" }}>ä¸‹è½½ JSON æ ¼å¼å·¥ä½œæµ</p>
</a>

ä¸‹è½½ä¸‹é¢çš„å›¾ç‰‡ä½œä¸ºè¾“å…¥å›¾ç‰‡

![workflow](https://raw.githubusercontent.com/Comfy-Org/example_workflows/refs/heads/main/image/qwen/qwen-image-union-control-lora/input.png)

### 2. æ¨¡å‹é“¾æ¥

ä¸‹è½½ä¸‹é¢çš„æ¨¡å‹ï¼Œç”±äºè¿™æ˜¯ä¸€ä¸ª LoRA æ¨¡å‹ï¼Œæ‰€ä»¥éœ€è¦ä¿å­˜åˆ° `ComfyUI/models/loras/` æ–‡ä»¶å¤¹ä¸‹
-  [qwen_image_union_diffsynth_lora.safetensors](https://huggingface.co/Comfy-Org/Qwen-Image-DiffSynth-ControlNets/blob/main/split_files/loras/qwen_image_union_diffsynth_lora.safetensors): å›¾åƒç»“æ„æ§åˆ¶lora æ”¯æŒ cannyã€depthã€postã€lineartã€softedgeã€normalã€openpose

### 3. å·¥ä½œæµè¯´æ˜

è¿™ä¸ªæ¨¡å‹æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„æ§åˆ¶ LoRA, æ”¯æŒ  cannyã€depthã€poseã€lineartã€softedgeã€normalã€openpose ç­‰æ§åˆ¶, ç”±äºè®¸å¤šçš„å›¾åƒé¢„å¤„ç†åŸç”ŸèŠ‚ç‚¹å¹¶æœªå®Œå…¨æ”¯æŒï¼Œæ‰€ä»¥ä½ åº”è¯¥éœ€è¦ç±»ä¼¼ [comfyui_controlnet_aux](https://github.com/Fannovel16/comfyui_controlnet_aux) æ¥å®Œæˆå…¶å®ƒå›¾åƒçš„é¢„å¤„ç†

![Union Control LoRA](/images/tutorial/image/qwen/image_qwen_image_union_control_lora.jpg)

1. ç¡®ä¿ `LoraLoaderModelOnly` æ­£ç¡®åŠ è½½äº† `qwen_image_union_diffsynth_lora.safetensors`  æ¨¡å‹
2. ä¸Šä¼ è¾“å…¥å›¾åƒ
3. å¦‚éœ€è¦ä½ å¯ä»¥è°ƒæ•´ `Canny` èŠ‚ç‚¹çš„å‚æ•°ï¼Œç”±äºä¸åŒçš„è¾“å…¥å›¾åƒéœ€è¦ä¸åŒçš„å‚æ•°è®¾ç½®æ¥è·å¾—æ›´å¥½çš„å›¾åƒé¢„å¤„ç†ç»“æœï¼Œä½ å¯ä»¥å°è¯•è°ƒæ•´å¯¹åº”çš„å‚æ•°å€¼æ¥è·å¾—æ›´å¤š/æ›´å°‘ç»†èŠ‚
4. ç‚¹å‡» `Run` æŒ‰é’®ï¼Œæˆ–è€…ä½¿ç”¨å¿«æ·é”® `Ctrl(cmd) + Enter(å›è½¦)` æ¥è¿è¡Œå·¥ä½œæµ

> å…¶å®ƒç±»å‹çš„ç±»å‹çš„æ§åˆ¶ï¼Œä¹Ÿæ˜¯éœ€è¦å°†å›¾åƒå¤„ç†çš„éƒ¨åˆ†æ›¿æ¢
