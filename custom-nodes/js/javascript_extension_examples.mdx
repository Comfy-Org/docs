---
title: "Extension API Integration Examples"
---

This page provides practical examples of how to combine multiple extension APIs to create more comprehensive and integrated extensions. These examples demonstrate common patterns and best practices for extension development.

## Workspace Management Extension

This example combines settings, commands, menu items, and keyboard shortcuts to create a workspace management extension:

```javascript
app.registerExtension({
  name: "WorkspaceManagerExtension",
  // Define settings for workspace preferences
  settings: [
    {
      id: "workspaceManager.autoSave",
      name: "Auto-save Workspace",
      type: "boolean",
      defaultValue: true
    },
    {
      id: "workspaceManager.saveInterval",
      name: "Auto-save Interval (minutes)",
      type: "number",
      defaultValue: 5,
      attrs: {
        min: 1,
        max: 60
      }
    },
    {
      id: "workspaceManager.defaultPath",
      name: "Default Save Path",
      type: "text",
      defaultValue: "My Workspaces"
    }
  ],
  
  // Define commands for workspace actions
  commands: [
    {
      id: "saveWorkspace",
      label: "Save Current Workspace",
      function: function() {
        // Implementation omitted for brevity
        console.log("Saving workspace...");
      }
    },
    {
      id: "loadWorkspace",
      label: "Load Workspace",
      function: function() {
        // Implementation omitted for brevity
        console.log("Loading workspace...");
      }
    },
    {
      id: "manageWorkspaces",
      label: "Manage Workspaces",
      function: function() {
        // Show workspace management UI
        app.extensionManager.dialog.alert({
          title: "Workspace Manager",
          content: "Workspace management UI will be shown here"
        });
      }
    }
  ],
  
  // Add commands to menu
  menuCommands: [
    {
      path: ["File", "Workspaces"],
      commands: ["saveWorkspace", "loadWorkspace", "manageWorkspaces"]
    }
  ],
  
  // Add keyboard shortcuts
  keybindings: [
    {
      combo: { key: "s", ctrl: true, shift: true },
      commandId: "saveWorkspace"
    },
    {
      combo: { key: "o", ctrl: true, shift: true },
      commandId: "loadWorkspace"
    }
  ],
  
  // Initialize the extension
  async setup() {
    console.log("Workspace Manager Extension initialized");
    
    // Set up auto-save if enabled
    this.checkAutoSave();
    
    // Listen for setting changes
    app.extensionManager.setting.addListener(
      "workspaceManager.autoSave", 
      () => this.checkAutoSave()
    );
  },
  
  // Helper methods
  checkAutoSave() {
    const autoSave = app.extensionManager.setting.get("workspaceManager.autoSave");
    const interval = app.extensionManager.setting.get("workspaceManager.saveInterval");
    
    if (autoSave) {
      console.log(`Auto-save enabled with ${interval} minute interval`);
      // Implementation omitted for brevity
    } else {
      console.log("Auto-save disabled");
      // Implementation omitted for brevity
    }
  }
});
```

## Custom Node Analysis Tool

This example creates a sidebar tab that analyzes the current workflow and provides statistics and recommendations:

```javascript
app.registerExtension({
  name: "NodeAnalyzerExtension",
  // Define settings
  settings: [
    {
      id: "nodeAnalyzer.showPerformanceInfo",
      name: "Show Performance Information",
      type: "boolean",
      defaultValue: true
    },
    {
      id: "nodeAnalyzer.showOptimizationTips",
      name: "Show Optimization Tips",
      type: "boolean",
      defaultValue: true
    }
  ],
  
  // Initialize the extension
  async setup() {
    // Register sidebar tab
    app.extensionManager.registerSidebarTab({
      id: "nodeAnalyzer",
      icon: "pi pi-chart-bar",
      title: "Analyzer",
      tooltip: "Node Graph Analyzer",
      type: "custom",
      render: (el) => this.renderAnalyzerTab(el)
    });
    
    // Listen for graph changes to update analysis
    app.api.addEventListener("graphChanged", () => {
      this.updateAnalysis();
    });
  },
  
  // Render the analyzer tab
  renderAnalyzerTab(el) {
    // Create container
    this.container = document.createElement('div');
    this.container.className = 'node-analyzer-container';
    this.container.style.padding = '10px';
    this.container.style.overflow = 'auto';
    this.container.style.height = '100%';
    el.appendChild(this.container);
    
    // Initial analysis
    this.updateAnalysis();
  },
  
  // Update the analysis information
  updateAnalysis() {
    if (!this.container) return;
    
    const showPerformance = app.extensionManager.setting.get("nodeAnalyzer.showPerformanceInfo");
    const showTips = app.extensionManager.setting.get("nodeAnalyzer.showOptimizationTips");
    
    // Collect graph statistics
    const nodeCount = app.graph._nodes.length;
    const connectionCount = Object.keys(app.graph.links).length;
    const nodeTypes = this.getNodeTypeCounts();
    
    // Display information
    let html = `
      <h3>Workflow Analysis</h3>
      <p><strong>Nodes:</strong> ${nodeCount}</p>
      <p><strong>Connections:</strong> ${connectionCount}</p>
      
      <h4>Node Types:</h4>
      <ul>
    `;
    
    for (const [type, count] of Object.entries(nodeTypes)) {
      html += `<li>${type}: ${count}</li>`;
    }
    
    html += `</ul>`;
    
    // Add performance info if enabled
    if (showPerformance) {
      html += `
        <h4>Performance Analysis:</h4>
        <p>Estimated memory usage: ${this.estimateMemoryUsage()} MB</p>
        <p>Potential bottlenecks: ${this.identifyBottlenecks().join(', ') || 'None detected'}</p>
      `;
    }
    
    // Add optimization tips if enabled
    if (showTips) {
      const tips = this.generateOptimizationTips();
      if (tips.length > 0) {
        html += `
          <h4>Optimization Tips:</h4>
          <ul>
        `;
        
        for (const tip of tips) {
          html += `<li>${tip}</li>`;
        }
        
        html += `</ul>`;
      } else {
        html += `<h4>Optimization Tips:</h4><p>No optimization tips available</p>`;
      }
    }
    
    this.container.innerHTML = html;
  },
  
  // Helper methods (implementation details omitted for brevity)
  getNodeTypeCounts() {
    const counts = {};
    for (const node of app.graph._nodes) {
      const type = node.type;
      counts[type] = (counts[type] || 0) + 1;
    }
    return counts;
  },
  
  estimateMemoryUsage() {
    // Implementation omitted for brevity
    return Math.round(Math.random() * 1000); // Placeholder
  },
  
  identifyBottlenecks() {
    // Implementation omitted for brevity
    return ['KSampler', 'VAE Decode']; // Placeholder
  },
  
  generateOptimizationTips() {
    // Implementation omitted for brevity
    return [
      'Consider using lower resolution for initial tests',
      'Group related nodes together for better organization',
      'Use reroute nodes to reduce visual clutter'
    ]; // Placeholder
  }
});
```

## Interactive Dialog and Toast System

This example shows how to create an extension that combines dialogs, toasts, and commands to provide user feedback:

```javascript
app.registerExtension({
  name: "FeedbackExtension",
  // Define commands
  commands: [
    {
      id: "showSuccessToast",
      label: "Show Success Toast",
      function: function() {
        app.extensionManager.toast.add({
          severity: "success",
          summary: "Success",
          detail: "Operation completed successfully",
          life: 3000
        });
      }
    },
    {
      id: "showWarningToast",
      label: "Show Warning Toast",
      function: function() {
        app.extensionManager.toast.add({
          severity: "warn",
          summary: "Warning",
          detail: "This operation may take some time",
          life: 5000
        });
      }
    },
    {
      id: "showErrorToast",
      label: "Show Error Toast",
      function: function() {
        app.extensionManager.toast.add({
          severity: "error",
          summary: "Error",
          detail: "Operation failed",
          life: 5000
        });
      }
    },
    {
      id: "showConfirmDialog",
      label: "Show Confirm Dialog",
      function: function() {
        app.extensionManager.dialog.confirm({
          title: "Confirmation",
          message: "Are you sure you want to proceed?",
          callback: (result) => {
            if (result) {
              app.extensionManager.toast.add({
                severity: "info",
                summary: "Confirmed",
                detail: "You confirmed the action",
                life: 3000
              });
            } else {
              app.extensionManager.toast.add({
                severity: "info",
                summary: "Cancelled",
                detail: "You cancelled the action",
                life: 3000
              });
            }
          }
        });
      }
    },
    {
      id: "promptForInput",
      label: "Prompt for Input",
      function: function() {
        app.extensionManager.dialog.prompt({
          title: "User Input",
          message: "Please enter a value:",
          defaultValue: "",
          callback: (result) => {
            if (result !== null) {
              app.extensionManager.toast.add({
                severity: "info",
                summary: "Input Received",
                detail: `You entered: ${result}`,
                life: 3000
              });
            }
          }
        });
      }
    }
  ],
  
  // Add commands to menu
  menuCommands: [
    {
      path: ["Extensions", "Feedback"],
      commands: [
        "showSuccessToast", 
        "showWarningToast", 
        "showErrorToast", 
        "showConfirmDialog", 
        "promptForInput"
      ]
    }
  ],
  
  // Add keyboard shortcuts
  keybindings: [
    {
      combo: { key: "1", ctrl: true, alt: true },
      commandId: "showSuccessToast"
    },
    {
      combo: { key: "2", ctrl: true, alt: true },
      commandId: "showWarningToast"
    },
    {
      combo: { key: "3", ctrl: true, alt: true },
      commandId: "showErrorToast"
    },
    {
      combo: { key: "4", ctrl: true, alt: true },
      commandId: "showConfirmDialog"
    },
    {
      combo: { key: "5", ctrl: true, alt: true },
      commandId: "promptForInput"
    }
  ],
  
  // Initialize the extension
  async setup() {
    // Add about panel badge
    app.aboutPageBadges = [
      {
        label: "Feedback Extension",
        url: "https://example.com/feedback-extension",
        icon: "pi pi-comments"
      }
    ];
    
    console.log("Feedback Extension initialized");
  }
});
```

## Extension Development Best Practices

When combining multiple extension APIs:

1. **Organize Your Code**: Group related functionality together and use meaningful names for methods and variables.

2. **Avoid Duplication**: Reuse functionality across different parts of your extension.

3. **Handle Settings Changes**: Listen for settings changes and update your extension's behavior accordingly.

4. **Clean Up Resources**: If your extension creates DOM elements or adds event listeners, make sure to clean them up when they're no longer needed.

5. **Provide User Feedback**: Use toasts to notify users about operations and their results.

6. **Make Confirmations Clear**: When asking for confirmation, make it clear what action will be taken.

7. **Follow UI Guidelines**: Ensure your extension's UI follows ComfyUI's design patterns for a consistent user experience.

By combining multiple extension APIs effectively, you can create powerful, integrated extensions that enhance the ComfyUI experience.

## Related Documentation

- [JavaScript Overview](/custom-nodes/js/javascript_overview)
- [Dialog API](/custom-nodes/js/javascript_dialog)
- [Toast API](/custom-nodes/js/javascript_toast)
- [Sidebar Tabs](/custom-nodes/js/javascript_sidebar_tabs)
- [Commands and Keybindings](/custom-nodes/js/javascript_commands_keybindings)
- [Extension Debugging and Performance](/custom-nodes/js/javascript_debugging)