## 添加外部模型路径

如果你想要在 `ComfyUI/models` 之外管理你的模型文件，可能出于以下原因:

- 你有多个 ComfyUI 实例，你想要让这些实例共享模型文件，从而减少磁盘占用
- 你有多个不同的类型的 GUI 程序，如：WebUI, 你想要他们共用模型文件
- 模型文件无法被识别或读取到

我们提供了通过 `extra_model_paths.yaml` 配置文件来添加额外模型搜索路径的方法。

### 不同 ComfyUI 版本配置文件位置

<Tabs>
  <Tab title="Portable便携版">
  对于便携版和手动安装，你可以在 ComfyUI 的根目录下找到 `extra_model_paths.yaml.example` 的示例文件
  ``
  ComfyUI/extra_model_paths.yaml.example
  ``
  请把它复制一份并重命名为 `extra_model_paths.yaml` 来使用

  你也可以在 [这里](https://github.com/comfyanonymous/ComfyUI/blob/master/extra_model_paths.yaml.example) 找到配置示例文件

  </Tab>
  <Tab title="Desktop桌面版">
  如果你使用的是 ComfyUI 桌面应用程序，你可以参考下图打开额外模型的配置文件：

  ![Open Config File](/images/zh/desktop/extra_model_paths.jpg)

  或者通过下面的位置打开：

  <Tabs>
    <Tab title="Windows">
      ```
      C:\Users\YourUsername\AppData\Roaming\ComfyUI\extra_models_config.yaml
      ```
    </Tab>
    <Tab title="macOS">
      ```
      ~/Library/Application Support/ComfyUI/extra_models_config.yaml
      ```
    </Tab>
  </Tabs>
  </Tab>
</Tabs>

### 配置示例

比如，你现在的模型文件结构如下 

```
📁 your_path/
  ├── 📁models/
  |   ├── 📁 lora/
  |   │   └── xxxxx.safetensors
  |   ├── 📁 checkpoints/
  |   │   └── xxxxx.safetensors
  |   ├── 📁 vae/
  |   │   └── xxxxx.safetensors
  |   └── 📁 controlnet/
  |       └── xxxxx.safetensors
```

那么你可以进行如下的配置来让 ComfyUI 识别到你设备上的模型路径

```
my_custom_config:
    base_path: your_path
    embeddings: models/lora/
    loras: models/checkpoints/
    loras: models/vae/
    loras: models/controlnet/
```

或者你也可以参考默认的 [extra_model_paths.yaml.example](https://github.com/comfyanonymous/ComfyUI/blob/master/extra_model_paths.yaml.example) 来配置，保存之后， 需要 **重启 ComfyUI** 才能生效。

下面是完整的原始的配置配置示例:

```yaml
#Rename this to extra_model_paths.yaml and ComfyUI will load it


#config for a1111 ui
#all you have to do is change the base_path to where yours is installed
a111:
    base_path: path/to/stable-diffusion-webui/

    checkpoints: models/Stable-diffusion
    configs: models/Stable-diffusion
    vae: models/VAE
    loras: |
         models/Lora
         models/LyCORIS
    upscale_models: |
                  models/ESRGAN
                  models/RealESRGAN
                  models/SwinIR
    embeddings: embeddings
    hypernetworks: models/hypernetworks
    controlnet: models/ControlNet

#config for comfyui
#your base path should be either an existing comfy install or a central folder where you store all of your models, loras, etc.

#comfyui:
#     base_path: path/to/comfyui/
#     # You can use is_default to mark that these folders should be listed first, and used as the default dirs for eg downloads
#     #is_default: true
#     checkpoints: models/checkpoints/
#     clip: models/clip/
#     clip_vision: models/clip_vision/
#     configs: models/configs/
#     controlnet: models/controlnet/
#     diffusion_models: |
#                  models/diffusion_models
#                  models/unet
#     embeddings: models/embeddings/
#     loras: models/loras/
#     upscale_models: models/upscale_models/
#     vae: models/vae/

#other_ui:
#    base_path: path/to/ui
#    checkpoints: models/checkpoints
#    gligen: models/gligen
#    custom_nodes: path/custom_nodes

```